/**
* jTemplates 0.8.4 (http://jtemplates.tpython.com)
* Copyright (c) 2007-2013 Tomasz Gloc (http://www.tpython.com)
* 
* Dual licensed under the MIT (MIT-LICENSE.txt)
* and/or GPL (GPL-LICENSE.txt) licenses.
*
* Id: $Id: jquery-jtemplates_uncompressed.js 203 2013-02-03 13:28:34Z tom $
*/

/**
* @fileOverview Template engine in JavaScript.
* @name jTemplates
* @author Tomasz Gloc
* @date $Date: 2013-02-03 14:28:34 +0100 (N, 03 lut 2013) $
*/

if (window.jQuery && !window.jQuery.createTemplate) {
    (function (jQuery) {

        /**
        * [abstract]
        * @name BaseNode
        * @class Abstract node. [abstract]
        */

        /**
        * Process node and get the html string. [abstract]
        * @name get
        * @function
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        * @memberOf BaseNode
        */

        /**
        * [abstract]
        * @name BaseArray
        * @augments BaseNode
        * @class Abstract array/collection. [abstract]
        */

        /**
        * Add node 'e' to array.
        * @name push
        * @function
        * @param {BaseNode} e a node
        * @memberOf BaseArray
        */

        /**
        * See (http://jquery.com/).
        * @name jQuery
        * @class jQuery Library (http://jquery.com/)
        */

        /**
        * See (http://jquery.com/)
        * @name fn
        * @class jQuery Library (http://jquery.com/)
        * @memberOf jQuery
        */

        /**
        * Create new template from string s.
        * @name Template
        * @class A template or multitemplate.
        * @param {string} s A template string (like: "Text: {$T.txt}.").
        * @param {array} [includes] Array of included templates.
        * @param {object} [settings] Settings.
        * @config {boolean} [disallow_functions] Do not allow use function in data (default: true).
        * @config {boolean} [filter_data] Enable filter data using escapeHTML (default: true).
        * @config {boolean} [filter_params] Enable filter parameters using escapeHTML (default: false).
        * @config {boolean} [runnable_functions] Automatically run function (from data) inside {} [default: false].
        * @config {boolean} [clone_data] Clone input data [default: true]
        * @config {boolean} [clone_params] Clone input parameters [default: true]
        * @config {Function} [f_cloneData] Function used to data cloning
        * @config {Function} [f_escapeString] Function used to escape strings
        * @config {Function} [f_parseJSON] Function used to parse JSON
        * @augments BaseNode
        */
        var Template = function (s, includes, settings) {
            this._tree = [];
            this._param = {};
            this._includes = null;
            this._templates = {};
            this._templates_code = {};

            //default parameters
            this.settings = jQuery.extend({
                disallow_functions: false,
                filter_data: true,
                filter_params: false,
                runnable_functions: false,
                clone_data: true,
                clone_params: true
            }, settings);

            //set handlers
            this.f_cloneData = (this.settings.f_cloneData !== undefined) ? (this.settings.f_cloneData) : (TemplateUtils.cloneData);
            this.f_escapeString = (this.settings.f_escapeString !== undefined) ? (this.settings.f_escapeString) : (TemplateUtils.escapeHTML);
            this.f_parseJSON = (this.settings.f_parseJSON !== undefined) ? (this.settings.f_parseJSON) : ((this.settings.disallow_functions) ? (jQuery.parseJSON) : (TemplateUtils.parseJSON));

            if (s == null) {
                return;
            }

            //split multiteplate
            this.splitTemplates(s, includes);

            if (s) {
                //set main template
                this.setTemplate(this._templates_code['MAIN'], includes, this.settings);
            }

            this._templates_code = null;
        };

        /**
        * jTemplates version
        * @type string
        */
        Template.version = '0.8.4';

        /**
        * Debug mode (all errors are on), default: off
        * @type Boolean
        */
        Template.DEBUG_MODE = false;

        /**
        * Foreach loop limit (enable only when DEBUG_MODE = true)
        * @type integer
        */
        Template.FOREACH_LOOP_LIMIT = 10000;

        /**
        * Global guid
        * @type integer
        */
        Template.guid = 0;

        /**
        * Split multitemplate into multiple templates.
        * @param {string} s A template string (like: "Text: {$T.txt}.").
        * @param {array} includes Array of included templates.
        */
        Template.prototype.splitTemplates = function (s, includes) {
            var reg = /\{#template *(\w+) *(.*?) *\}/g, //split multitemplate into subtemplates
			iter, tname, se, lastIndex = null, _template_settings = [], i;

            //while find new subtemplate
            while ((iter = reg.exec(s)) !== null) {
                lastIndex = reg.lastIndex;
                tname = iter[1];
                se = s.indexOf('{#/template ' + tname + '}', lastIndex);
                if (se === -1) {
                    throw new Error('jTemplates: Template "' + tname + '" is not closed.');
                }
                //save a subtemplate and parse options
                this._templates_code[tname] = s.substring(lastIndex, se);
                _template_settings[tname] = TemplateUtils.optionToObject(iter[2]);
            }
            //when no subtemplates, use all as main template
            if (lastIndex === null) {
                this._templates_code['MAIN'] = s;
                return;
            }

            //create a new object for every subtemplates
            for (i in this._templates_code) {
                if (i !== 'MAIN') {
                    this._templates[i] = new Template();
                }
            }
            for (i in this._templates_code) {
                if (i !== 'MAIN') {
                    this._templates[i].setTemplate(this._templates_code[i],
					jQuery.extend({}, includes || {}, this._templates || {}),
					jQuery.extend({}, this.settings, _template_settings[i]));
                    this._templates_code[i] = null;
                }
            }
        };

        /**
        * Parse template. (should be template, not multitemplate).
        * @param {string} s A template string (like: "Text: {$T.txt}.").
        * @param {array} includes Array of included templates.
        * @param {object} [settings] Settings.
        */
        Template.prototype.setTemplate = function (s, includes, settings) {
            if (s == undefined) {
                this._tree.push(new TextNode('', 1, this));
                return;
            }
            s = s.replace(/[\n\r]/g, ''); //remove endlines
            s = s.replace(/\{\*.*?\*\}/g, ''); //remove comments
            this._includes = jQuery.extend({}, this._templates || {}, includes || {});
            this.settings = new Object(settings);
            var node = this._tree,
			op = s.match(/\{#.*?\}/g), //find operators
			ss = 0, se = 0, e, literalMode = 0, i, l;

            //loop operators
            for (i = 0, l = (op) ? (op.length) : (0); i < l; ++i) {
                var this_op = op[i];

                //when literal mode is on, treat operator like a text
                if (literalMode) {
                    se = s.indexOf('{#/literal}', ss); //find end of block
                    if (se === -1) {
                        throw new Error("jTemplates: No end of literal.");
                    }
                    if (se > ss) {
                        node.push(new TextNode(s.substring(ss, se), 1, this));
                    }
                    ss = se + 11; //strlen '{#/literal}'
                    literalMode = 0;
                    while (i < l && op[i] !== '{#/literal}') { //skip all operators until literal end
                        i++;
                    }
                    continue;
                }

                se = s.indexOf(this_op, ss);
                if (se > ss) {
                    node.push(new TextNode(s.substring(ss, se), literalMode, this));
                }
                this_op.match(/\{#([\w\/]+).*?\}/); //find operator name
                var op_ = RegExp.$1;
                switch (op_) {
                    case 'elseif':
                        node.addCond(this_op);
                        break;
                    case 'if':
                        e = new opIF(node, this);
                        e.addCond(this_op);
                        node.push(e);
                        node = e;
                        break;
                    case 'else':
                        node.switchToElse();
                        break;
                    case '/if':
                    case '/for':
                    case '/foreach':
                        node = node.getParent();
                        break;
                    case 'foreach':
                        e = new opFOREACH(this_op, node, this);
                        node.push(e);
                        node = e;
                        break;
                    case 'for':
                        e = opFORFactory(this_op, node, this);
                        node.push(e);
                        node = e;
                        break;
                    case 'continue':
                    case 'break':
                        node.push(new JTException(op_));
                        break;
                    case 'include':
                        node.push(new Include(this_op, this._includes, this));
                        break;
                    case 'param':
                        node.push(new UserParam(this_op, this));
                        break;
                    case 'var':
                        node.push(new UserVariable(this_op, this));
                        break;
                    case 'cycle':
                        node.push(new Cycle(this_op));
                        break;
                    case 'ldelim':
                        node.push(new TextNode('{', 1, this));
                        break;
                    case 'rdelim':
                        node.push(new TextNode('}', 1, this));
                        break;
                    case 'literal':
                        literalMode = 1;
                        break;
                    case '/literal':
                        if (Template.DEBUG_MODE) {
                            throw new Error("jTemplates: Missing begin of literal.");
                        }
                        break;
                    default:
                        if (Template.DEBUG_MODE) {
                            throw new Error('jTemplates: unknown tag: ' + op_ + '.');
                        }
                }

                ss = se + this_op.length;
            }

            if (s.length > ss) {
                node.push(new TextNode(s.substr(ss), literalMode, this));
            }
        };

        /**
        * Process template and get the html string.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        Template.prototype.get = function (d, param, element, deep) {
            ++deep;

            if (deep == 1 && element != undefined) {
                jQuery.removeData(element, "jTemplatesRef");
            }

            var $T = d, $P, ret = '';

            //create clone of data
            if (this.settings.clone_data) {
                $T = this.f_cloneData(d, { escapeData: (this.settings.filter_data && deep == 1), noFunc: this.settings.disallow_functions }, this.f_escapeString);
            }

            //create clone of parameters
            if (!this.settings.clone_params) {
                $P = jQuery.extend({}, this._param, param);
            } else {
                $P = jQuery.extend({},
				this.f_cloneData(this._param, { escapeData: (this.settings.filter_params), noFunc: false }, this.f_escapeString),
				this.f_cloneData(param, { escapeData: (this.settings.filter_params && deep == 1), noFunc: false }, this.f_escapeString));
            }

            for (var i = 0, l = this._tree.length; i < l; ++i) {
                ret += this._tree[i].get($T, $P, element, deep);
            }

            this.EvalObj = null;

            --deep;
            return ret;
        };

        /**
        * Create and return EvalClass object
        * @return {EvalClass}
        */
        Template.prototype.getBin = function () {
            if (this.EvalObj == null) {
                this.EvalObj = new EvalClass(this);
            }
            return this.EvalObj;
        };

        /**
        * Set to parameter 'name' value 'value'.
        * @param {string} name
        * @param {object} value
        */
        Template.prototype.setParam = function (name, value) {
            this._param[name] = value;
        };


        /**
        * Template utilities.
        * @namespace Template utilities.
        */
        TemplateUtils = function () {
        };

        /**
        * Replace chars &, >, <, ", ' with html entities.
        * To disable function set settings: filter_data=false, filter_params=false
        * @param {string} string
        * @return {string}
        * @static
        * @memberOf TemplateUtils
        */
        TemplateUtils.escapeHTML = function (txt) {
            return txt.replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
        };

        /**
        * Make a copy od data 'd'. It also filters data (depend on 'filter').
        * @param {object} d input data
        * @param {object} filter a filters
        * @config {boolean} [escapeData] Use escapeHTML on every string.
        * @config {boolean} [noFunc] Do not allow to use function (throws exception).
        * @param {Function} f_escapeString function using to filter string (usually: TemplateUtils.escapeHTML)
        * @return {object} output data (filtered)
        * @static
        * @memberOf TemplateUtils
        */
        TemplateUtils.cloneData = function (d, filter, f_escapeString) {
            if (d == null) {
                return d;
            }
            switch (d.constructor) {
                case Object:
                    var o = {};
                    for (var i in d) {
                        o[i] = TemplateUtils.cloneData(d[i], filter, f_escapeString);
                    }
                    if (!filter.noFunc) {
                        if (d.hasOwnProperty("toString")) {
                            o.toString = d.toString;
                        }
                    }
                    return o;
                case Array:
                    var a = [];
                    for (var i = 0, l = d.length; i < l; ++i) {
                        a[i] = TemplateUtils.cloneData(d[i], filter, f_escapeString);
                    }
                    return a;
                case String:
                    return (filter.escapeData) ? (f_escapeString(d)) : (d);
                case Function:
                    if (filter.noFunc) {
                        if (Template.DEBUG_MODE) {
                            throw new Error("jTemplates: Functions are not allowed.");
                        }
                        else {
                            return undefined;
                        }
                    }
            }
            return d;
        };

        /**
        * Convert text-based option string to Object
        * @param {string} optionText text-based option string
        * @return {Object}
        * @static
        * @memberOf TemplateUtils
        */
        TemplateUtils.optionToObject = function (optionText) {
            if (optionText === null || optionText === undefined) {
                return {};
            }

            var o = optionText.split(/[= ]/);
            if (o[0] === '') {
                o.shift();
            }

            var obj = {};
            for (var i = 0, l = o.length; i < l; i += 2) {
                obj[o[i]] = o[i + 1];
            }

            return obj;
        };

        /**
        * Parse JSON string into object
        * @param {string} data Text JSON
        * @return {Object}
        * @static
        */
        TemplateUtils.parseJSON = function (data) {
            if (typeof data !== "string" || !data) {
                return null;
            }
            try {
                return (new Function("return " + jQuery.trim(data)))();
            } catch (e) {
                if (Template.DEBUG_MODE) {
                    throw new Error("jTemplates: Invalid JSON");
                }
                return {};
            }
        };

        /**
        * Find parents nodes for a reference value and return it
        * @param {Element} el html element
        * @param {int} guid template process unique identificator
        * @param {int} id index
        * @return {object}
        * @static
        */
        TemplateUtils.ReturnRefValue = function (el, guid, id) {
            //search element with stored data
            while (el != null) {
                var d = jQuery.data(el, 'jTemplatesRef');
                if (d != undefined && d.guid == guid && d.d[id] != undefined) {
                    return d.d[id];
                }
                el = el.parentNode;
            }
            return null;
        };

        /**
        * Create a new text node.
        * @name TextNode
        * @class All text (block {..}) between control's block "{#..}".
        * @param {string} val text string
        * @param {boolean} literalMode When enable (true) template does not process blocks {..}.
        * @param {Template} Template object
        * @augments BaseNode
        */
        var TextNode = function (val, literalMode, template) {
            this._value = val;
            this._literalMode = literalMode;
            this._template = template;
        };

        /**
        * Get the html string for a text node.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        TextNode.prototype.get = function (d, param, element, deep) {
            if (this._literalMode) {
                return this._value;
            }
            var s = this._value;
            var result = "";
            var i = -1;
            var nested = 0;
            var sText = -1;
            var sExpr = 0;
            while (true) {
                var lm = s.indexOf("{", i + 1);
                var rm = s.indexOf("}", i + 1);
                if (lm < 0 && rm < 0) {
                    break;
                }
                if ((lm != -1 && lm < rm) || (rm == -1)) {
                    i = lm;
                    if (++nested == 1) {
                        sText = lm;
                        result += s.substring(sExpr, i);
                        sExpr = -1;
                    }
                } else {
                    i = rm;
                    if (--nested === 0) {
                        if (sText >= 0) {
                            result += this._template.getBin().evaluateContent(d, param, element, s.substring(sText, rm + 1));
                            sText = -1;
                            sExpr = i + 1;
                        }
                    } else if (nested < 0) {
                        nested = 0;
                    }
                }
            }
            if (sExpr > -1) {
                result += s.substr(sExpr);
            }
            return result;
        };

        /**
        * Virtual context for eval() (internal class)
        * @name EvalClass
        * @class Virtual bin for eval() evaluation
        * @param {Template} t template
        * @private
        */
        EvalClass = function (t) {
            this.__templ = t;
        };

        /**
        * Evaluate expression (template content)
        * @param {object} $T data
        * @param {object} $P parameters
        * @param {object} $Q element
        * @param {String} __value Template content
        * @return {String}
        */
        EvalClass.prototype.evaluateContent = function ($T, $P, $Q, __value) {
            try {
                var result = eval(__value);

                if (jQuery.isFunction(result)) {
                    if (this.__templ.settings.disallow_functions || !this.__templ.settings.runnable_functions) {
                        return '';
                    }
                    result = result($T, $P, $Q);
                }
                return (result === undefined) ? ("") : (String(result));
            } catch (e) {
                if (Template.DEBUG_MODE) {
                    if (e instanceof JTException) {
                        e.type = "subtemplate";
                    }
                    throw e;
                }
                return "";
            }
        };

        /**
        * Evaluate expression (simple eval)
        * @param {object} $T data
        * @param {object} $P parameters
        * @param {object} $Q element
        * @param {String} __value content to evaluate
        * @return {String}
        */
        EvalClass.prototype.evaluate = function ($T, $P, $Q, __value) {
            return eval(__value);
        };

        /**
        * Create a new conditional node.
        * @name opIF
        * @class A class represent: {#if}.
        * @param {object} par parent node
        * @param {Template} templ template
        * @augments BaseArray
        */
        var opIF = function (par, templ) {
            this._parent = par;
            this._templ = templ;
            this._cond = []; //conditions
            this._tree = []; //conditions subtree
            this._curr = null; //current subtree
        };

        /**
        * Add node 'e' to array.
        * @param {BaseNode} e a node
        */
        opIF.prototype.push = function (e) {
            this._curr.push(e);
        };

        /**
        * Get a parent node.
        * @return {BaseNode}
        */
        opIF.prototype.getParent = function () {
            return this._parent;
        };

        /**
        * Add condition
        * @param {string} oper content of operator {#..}
        */
        opIF.prototype.addCond = function (oper) {
            oper.match(/\{#(?:else)*if (.*?)\}/);
            this._cond.push(RegExp.$1);
            this._curr = [];
            this._tree.push(this._curr);
        };

        /**
        * Switch to else
        */
        opIF.prototype.switchToElse = function () {
            this._cond.push(true); //else is the last condition and its always true
            this._curr = [];
            this._tree.push(this._curr);
        };

        /**
        * Process node depend on conditional and get the html string.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        opIF.prototype.get = function (d, param, element, deep) {
            var ret = ''; //result

            try {
                //foreach condition
                for (var ci = 0, cl = this._cond.length; ci < cl; ++ci) {
                    //if condition is true
                    if (this._templ.getBin().evaluate(d, param, element, this._cond[ci])) {
                        //execute and exit
                        var t = this._tree[ci];
                        for (var i = 0, l = t.length; i < l; ++i) {
                            ret += t[i].get(d, param, element, deep);
                        }
                        return ret;
                    }
                }
            } catch (e) {
                if (Template.DEBUG_MODE || (e instanceof JTException)) {
                    throw e;
                }
            }
            return ret;
        };

        /**
        * Handler for a tag 'FOR'. Create new and return relative opFOREACH object.
        * @name opFORFactory
        * @class Handler for a tag 'FOR'. Create new and return relative opFOREACH object.
        * @param {string} oper content of operator {#..}
        * @param {object} par parent node
        * @param {Template} template a pointer to Template object
        * @return {opFOREACH}
        */
        opFORFactory = function (oper, par, template) {
            //create operator FOREACH with function as iterator
            if (oper.match(/\{#for (\w+?) *= *(\S+?) +to +(\S+?) *(?:step=(\S+?))*\}/)) {
                var f = new opFOREACH(null, par, template);
                f._name = RegExp.$1;
                f._option = { 'begin': (RegExp.$2 || 0), 'end': (RegExp.$3 || -1), 'step': (RegExp.$4 || 1), 'extData': '$T' };
                f._runFunc = (function (i) { return i; });
                return f;
            } else {
                throw new Error('jTemplates: Operator failed "find": ' + oper);
            }
        };

        /**
        * Create a new loop node.
        * @name opFOREACH
        * @class A class represent: {#foreach}.
        * @param {string} oper content of operator {#..}
        * @param {object} par parent node
        * @param {Template} template a pointer to Template object
        * @augments BaseArray
        */
        var opFOREACH = function (oper, par, template) {
            this._parent = par;
            this._template = template;
            if (oper != null) {
                oper.match(/\{#foreach +(.+?) +as +(\w+?)( .+)*\}/);
                this._arg = RegExp.$1;
                this._name = RegExp.$2;
                this._option = RegExp.$3 || null;
                this._option = TemplateUtils.optionToObject(this._option);
            }

            this._onTrue = [];
            this._onFalse = [];
            this._currentState = this._onTrue;
            //this._runFunc = null;
        };

        /**
        * Add node 'e' to array.
        * @param {BaseNode} e
        */
        opFOREACH.prototype.push = function (e) {
            this._currentState.push(e);
        };

        /**
        * Get a parent node.
        * @return {BaseNode}
        */
        opFOREACH.prototype.getParent = function () {
            return this._parent;
        };

        /**
        * Switch from collection onTrue to onFalse.
        */
        opFOREACH.prototype.switchToElse = function () {
            this._currentState = this._onFalse;
        };

        /**
        * Process loop and get the html string.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        opFOREACH.prototype.get = function (d, param, element, deep) {
            try {
                //array of elements in foreach (or function)
                var fcount = (this._runFunc === undefined) ? (this._template.getBin().evaluate(d, param, element, this._arg)) : (this._runFunc);
                if (fcount === $) {
                    throw new Error("jTemplate: Variable '$' cannot be used as loop-function");
                }
                var key = []; //only for objects
                var mode = typeof fcount;
                if (mode == 'object') {
                    //transform object to array
                    var arr = [];
                    jQuery.each(fcount, function (k, v) {
                        key.push(k);
                        arr.push(v);
                    });
                    fcount = arr;
                }
                //setup primary iterator, iterator can get data from options (using by operator FOR) or from data "$T"
                var extData = (this._option.extData !== undefined) ? (this._template.getBin().evaluate(d, param, element, this._option.extData)) : ((d != null) ? (d) : ({}));
                if (extData == null) {
                    extData = {};
                }
                //start, end and step
                var s = Number(this._template.getBin().evaluate(d, param, element, this._option.begin) || 0), e; //start, end
                var step = Number(this._template.getBin().evaluate(d, param, element, this._option.step) || 1);
                if (mode != 'function') {
                    e = fcount.length;
                } else {
                    if (this._option.end === undefined || this._option.end === null) {
                        e = Number.MAX_VALUE;
                    } else {
                        e = Number(this._template.getBin().evaluate(d, param, element, this._option.end)) + ((step > 0) ? (1) : (-1));
                    }
                }
                var ret = ''; //result string
                var i, l; //local iterators

                if (this._option.count) {
                    //limit number of loops
                    var tmp = s + Number(this._template.getBin().evaluate(d, param, element, this._option.count));
                    e = (tmp > e) ? (e) : (tmp);
                }

                if ((e > s && step > 0) || (e < s && step < 0)) {
                    var iteration = 0;
                    var _total = (mode != 'function') ? (Math.ceil((e - s) / step)) : undefined;
                    var ckey, cval; //current key, current value
                    var loopCounter = 0;
                    for (; ((step > 0) ? (s < e) : (s > e)); s += step, ++iteration, ++loopCounter) {
                        if (Template.DEBUG_MODE && loopCounter > Template.FOREACH_LOOP_LIMIT) {
                            throw new Error("jTemplate: Foreach loop limit was exceed");
                        }
                        ckey = key[s];
                        if (mode != 'function') {
                            cval = fcount[s];  //get value from array
                        } else {
                            cval = fcount(s);  //calc function
                            //if no result from function then stop foreach
                            if (cval === undefined || cval === null) {
                                break;
                            }
                        }
                        if ((typeof cval == 'function') && (this._template.settings.disallow_functions || !this._template.settings.runnable_functions)) {
                            continue;
                        }
                        if ((mode == 'object') && (ckey in Object) && (cval === Object[ckey])) {
                            continue;
                        }
                        //backup on value
                        var prevValue = extData[this._name];
                        //set iterator properties
                        extData[this._name] = cval;
                        extData[this._name + '$index'] = s;
                        extData[this._name + '$iteration'] = iteration;
                        extData[this._name + '$first'] = (iteration === 0);
                        extData[this._name + '$last'] = (s + step >= e);
                        extData[this._name + '$total'] = _total;
                        extData[this._name + '$key'] = (ckey !== undefined && ckey.constructor == String) ? (this._template.f_escapeString(ckey)) : (ckey);
                        extData[this._name + '$typeof'] = typeof cval;
                        for (i = 0, l = this._onTrue.length; i < l; ++i) {
                            try {
                                ret += this._onTrue[i].get(extData, param, element, deep);
                            } catch (ex) {
                                if (ex instanceof JTException) {
                                    switch (ex.type) {
                                        case 'continue':
                                            i = l; //force skip to next node
                                            break;
                                        case 'break':
                                            i = l;  //force skip to next node
                                            s = e;  //force skip outsite foreach
                                            break;
                                        default:
                                            throw ex;
                                    }
                                } else {
                                    throw ex;
                                }
                            }
                        }
                        //restore values
                        delete extData[this._name + '$index'];
                        delete extData[this._name + '$iteration'];
                        delete extData[this._name + '$first'];
                        delete extData[this._name + '$last'];
                        delete extData[this._name + '$total'];
                        delete extData[this._name + '$key'];
                        delete extData[this._name + '$typeof'];
                        delete extData[this._name];
                        extData[this._name] = prevValue;
                    }
                } else {
                    //no items to loop ("foreach->else")
                    for (i = 0, l = this._onFalse.length; i < l; ++i) {
                        ret += this._onFalse[i].get(d, param, element, deep);
                    }
                }
                return ret;
            } catch (e) {
                if (Template.DEBUG_MODE || (e instanceof JTException)) {
                    throw e;
                }
                return "";
            }
        };

        /**
        * Template-control exceptions
        * @name JTException
        * @class A class used internals for a template-control exceptions
        * @param type {string} Type of exception
        * @augments Error
        * @augments BaseNode
        */
        var JTException = function (type) {
            this.type = type;
        };
        JTException.prototype = Error;

        /**
        * Throw a template-control exception
        * @throws It throws itself
        */
        JTException.prototype.get = function (d) {
            throw this;
        };

        /**
        * Create a new entry for included template.
        * @name Include
        * @class A class represent: {#include}.
        * @param {string} oper content of operator {#..}
        * @param {array} includes
        * @param {Template} templ template
        * @augments BaseNode
        */
        var Include = function (oper, includes, templ) {
            oper.match(/\{#include (.*?)(?: root=(.*?))?\}/);
            this._template = includes[RegExp.$1];
            if (this._template == undefined) {
                if (Template.DEBUG_MODE) {
                    throw new Error('jTemplates: Cannot find include: ' + RegExp.$1);
                }
            }
            this._root = RegExp.$2;
            this._mainTempl = templ;
        };

        /**
        * Run method get on included template.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        Include.prototype.get = function (d, param, element, deep) {
            try {
                //run a subtemplates with a new root node
                return this._template.get(this._mainTempl.getBin().evaluate(d, param, element, this._root), param, element, deep);
            } catch (e) {
                if (Template.DEBUG_MODE || (e instanceof JTException)) {
                    throw e;
                }
            }
            return '';
        };

        /**
        * Create new node for {#param}.
        * @name UserParam
        * @class A class represent: {#param}.
        * @param {string} oper content of operator {#..}
        * @param {Template} templ template
        * @augments BaseNode
        */
        var UserParam = function (oper, templ) {
            oper.match(/\{#param name=(\w*?) value=(.*?)\}/);
            this._name = RegExp.$1;
            this._value = RegExp.$2;
            this._templ = templ;
        };

        /**
        * Return value of selected parameter.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String} empty string
        */
        UserParam.prototype.get = function (d, param, element, deep) {
            try {
                param[this._name] = this._templ.getBin().evaluate(d, param, element, this._value);
            } catch (e) {
                if (Template.DEBUG_MODE || (e instanceof JTException)) {
                    throw e;
                }
                param[this._name] = undefined;
            }
            return '';
        };

        /**
        * Create new node for {#var}.
        * @name UserVariable
        * @class A class represent: {#var}.
        * @param {string} oper content of operator {#..}
        * @param {Template} templ template
        * @augments BaseNode
        */
        var UserVariable = function (oper, templ) {
            oper.match(/\{#var (.*?)\}/);
            this._id = RegExp.$1;
            this._templ = templ;
        };

        /**
        * Return value of selected variable.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String} calling of function ReturnRefValue (as text string)
        */
        UserVariable.prototype.get = function (d, param, element, deep) {
            try {
                if (element == undefined) {
                    return "";
                }
                var obj = this._templ.getBin().evaluate(d, param, element, this._id);
                var refobj = jQuery.data(element, "jTemplatesRef");
                if (refobj == undefined) {
                    refobj = { guid: (++Template.guid), d: [] };
                }
                var i = refobj.d.push(obj);
                jQuery.data(element, "jTemplatesRef", refobj);
                return "(TemplateUtils.ReturnRefValue(this," + refobj.guid + "," + (i - 1) + "))";
            } catch (e) {
                if (Template.DEBUG_MODE || (e instanceof JTException)) {
                    throw e;
                }
                return '';
            }
        };

        /**
        * Create a new cycle node.
        * @name Cycle
        * @class A class represent: {#cycle}.
        * @param {string} oper content of operator {#..}
        * @augments BaseNode
        */
        var Cycle = function (oper) {
            oper.match(/\{#cycle values=(.*?)\}/);
            this._values = eval(RegExp.$1);
            this._length = this._values.length;
            if (this._length <= 0) {
                throw new Error('jTemplates: no elements for cycle');
            }
            this._index = 0;
            this._lastSessionID = -1;
        };

        /**
        * Do a step on cycle and return value.
        * @param {object} d data
        * @param {object} param parameters
        * @param {Element} element a HTML element
        * @param {Number} deep
        * @return {String}
        */
        Cycle.prototype.get = function (d, param, element, deep) {
            var sid = jQuery.data(element, 'jTemplateSID');
            if (sid != this._lastSessionID) {
                this._lastSessionID = sid;
                this._index = 0;
            }
            var i = this._index++ % this._length;
            return this._values[i];
        };


        /**
        * Add a Template to HTML Elements.
        * @param {Template/string} s a Template or a template string
        * @param {array} [includes] Array of included templates.
        * @param {object} [settings] Settings (see Template)
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.setTemplate = function (s, includes, settings) {
            return jQuery(this).each(function () {
                var t = (s && s.constructor == Template) ? s : new Template(s, includes, settings);
                jQuery.data(this, 'jTemplate', t);
                jQuery.data(this, 'jTemplateSID', 0);
            });
        };

        /**
        * Add a Template (from URL) to HTML Elements.
        * @param {string} url_ URL to template
        * @param {array} [includes] Array of included templates.
        * @param {object} [settings] Settings (see Template)
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.setTemplateURL = function (url_, includes, settings) {
            var s = jQuery.ajax({
                url: url_,
                dataType: 'text',
                async: false,
                type: 'GET'
            }).responseText;

            return jQuery(this).setTemplate(s, includes, settings);
        };

        /**
        * Create a Template from element's content.
        * @param {string} elementName an ID of element
        * @param {array} [includes] Array of included templates.
        * @param {object} [settings] Settings (see Template)
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.setTemplateElement = function (elementName, includes, settings) {
            var s = jQuery('#' + elementName).val();
            if (s == null) {
                s = jQuery('#' + elementName).html();
                s = s.replace(/&lt;/g, "<").replace(/&gt;/g, ">");
            }

            s = jQuery.trim(s);
            s = s.replace(/^<\!\[CDATA\[([\s\S]*)\]\]>$/im, '$1');
            s = s.replace(/^<\!--([\s\S]*)-->$/im, '$1');

            return jQuery(this).setTemplate(s, includes, settings);
        };

        /**
        * Check it HTML Elements have a template. Return count of templates.
        * @return {number} Number of templates.
        * @memberOf jQuery.fn
        */
        jQuery.fn.hasTemplate = function () {
            var count = 0;
            jQuery(this).each(function () {
                if (jQuery.getTemplate(this)) {
                    ++count;
                }
            });
            return count;
        };

        /**
        * Remote Template from HTML Element(s)
        * @return {jQuery} chainable jQuery class
        */
        jQuery.fn.removeTemplate = function () {
            jQuery(this).processTemplateStop();
            return jQuery(this).each(function () {
                jQuery.removeData(this, 'jTemplate');
            });
        };

        /**
        * Set to parameter 'name' value 'value'.
        * @param {string} name
        * @param {object} value
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.setParam = function (name, value) {
            return jQuery(this).each(function () {
                var t = jQuery.getTemplate(this);
                if (t != null) {
                    t.setParam(name, value);
                } else if (Template.DEBUG_MODE) {
                    throw new Error('jTemplates: Template is not defined.');
                }
            });
        };

        /**
        * Process template using data 'd' and parameters 'param'. Update HTML code.
        * @param {object} d data 
        * @param {object} [param] parameters
        * @option {object} [options] internal use only
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.processTemplate = function (d, param, options) {
            return jQuery(this).each(function () {
                var t = jQuery.getTemplate(this);
                if (t != null) {
                    if (options != undefined && options.StrToJSON) {
                        d = t.f_parseJSON(d);
                    }
                    jQuery.data(this, 'jTemplateSID', jQuery.data(this, 'jTemplateSID') + 1);
                    jQuery(this).html(t.get(d, param, this, 0));
                } else if (Template.DEBUG_MODE) {
                    throw new Error('jTemplates: Template is not defined.');
                }
            });
        };

        /**
        * Process template using data from URL 'url_' (only format JSON) and parameters 'param'. Update HTML code.
        * @param {string} url_ URL to data (in JSON)
        * @param {object} [param] parameters
        * @param {object} options options (over ajaxSettings) and callbacks
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.processTemplateURL = function (url_, param, options) {
            var that = this;

            var o = jQuery.extend({ cache: false }, jQuery.ajaxSettings);
            o = jQuery.extend(o, options);

            jQuery.ajax({
                url: url_,
                type: o.type,
                data: o.data,
                dataFilter: o.dataFilter,
                async: o.async,
                headers: o.headers,
                cache: o.cache,
                timeout: o.timeout,
                dataType: 'text',
                success: function (d) {
                    var r = jQuery(that).processTemplate(d, param, { StrToJSON: true });
                    if (o.on_success) {
                        o.on_success(r);
                    }
                },
                error: o.on_error,
                complete: o.on_complete
            });
            return this;
        };

        /**
        * Create new Updater.
        * @name Updater
        * @class This class is used for 'Live Refresh!'.
        * @param {string} url A destination URL
        * @param {object} param Parameters (for template)
        * @param {number} interval Time refresh interval
        * @param {object} args Additional URL parameters (in URL alter ?) as assoc array.
        * @param {array} objs An array of HTMLElement which will be modified by Updater.
        * @param {object} options options and callbacks
        */
        var Updater = function (url, param, interval, args, objs, options) {
            this._url = url;
            this._param = param;
            this._interval = interval;
            this._args = args;
            this.objs = objs;
            this.timer = null;
            this._options = options || {};

            var that = this;
            jQuery(objs).each(function () {
                jQuery.data(this, 'jTemplateUpdater', that);
            });
            this.run();
        };

        /**
        * Create new HTTP request to server, get data (as JSON) and send it to templates. Also check does HTMLElements still exists in Document.
        */
        Updater.prototype.run = function () {
            //remove deleted node
            this.objs = jQuery.grep(this.objs, function (elem) {
                return (jQuery.contains(document.body, elem.jquery ? elem[0] : elem));
            });
            //if no node then do nothing
            if (this.objs.length === 0) {
                return;
            }
            //ajax call
            var that = this;
            jQuery.ajax({
                url: this._url,
                dataType: 'text',
                data: this._args,
                cache: false,
                headers: that._options.headers,
                success: function (d) {
                    try {
                        var r = jQuery(that.objs).processTemplate(d, that._param, { StrToJSON: true });
                        if (that._options.on_success) {
                            that._options.on_success(r); //callback
                        }
                    } catch (ex) { }
                }
            });
            //schedule next run
            this.timer = setTimeout(function () { that.run(); }, this._interval);
        };

        /**
        * Start 'Live Refresh!'.
        * @param {string} url A destination URL
        * @param {object} param Parameters (for template)
        * @param {number} interval Time refresh interval
        * @param {object} args Additional URL parameters (in URL alter ?) as assoc array.
        * @param {object} options options and callbacks
        * @return {Updater} an Updater object
        * @memberOf jQuery.fn
        */
        jQuery.fn.processTemplateStart = function (url, param, interval, args, options) {
            return new Updater(url, param, interval, args, this, options);
        };

        /**
        * Stop 'Live Refresh!'.
        * @return {jQuery} chainable jQuery class
        * @memberOf jQuery.fn
        */
        jQuery.fn.processTemplateStop = function () {
            return jQuery(this).each(function () {
                var updater = jQuery.data(this, 'jTemplateUpdater');
                if (updater == null) {
                    return;
                }
                var that = this;
                updater.objs = jQuery.grep(updater.objs, function (o) {
                    return o != that;
                });
                jQuery.removeData(this, 'jTemplateUpdater');
            });
        };

        jQuery.extend(/** @scope jQuery.prototype */{
        /**
        * Create new Template.
        * @param {string} s A template string (like: "Text: {$T.txt}.").
        * @param {array} includes Array of included templates.
        * @param {object} settings Settings. (see Template)
        * @return {Template}
        */
        createTemplate: function (s, includes, settings) {
            return new Template(s, includes, settings);
        },

        /**
        * Create new Template from URL.
        * @param {string} url_ URL to template
        * @param {array} includes Array of included templates.
        * @param {object} settings Settings. (see Template)
        * @return {Template}
        */
        createTemplateURL: function (url_, includes, settings) {
            var s = jQuery.ajax({
                url: url_,
                dataType: 'text',
                async: false,
                type: 'GET'
            }).responseText;

            return new Template(s, includes, settings);
        },

        /**
        * Get a Template for HTML node
        * @param {Element} HTML node
        * @return {Template} a Template or "undefined"
        */
        getTemplate: function (element) {
            return jQuery.data(element, 'jTemplate');
        },

        /**
        * Process template and return text content.
        * @param {Template} template A Template
        * @param {object} data data
        * @param {object} param parameters
        * @return {string} Content of template
        */
        processTemplateToText: function (template, data, parameter) {
            return template.get(data, parameter, undefined, 0);
        },

        /**
        * Set Debug Mode
        * @param {Boolean} value
        */
        jTemplatesDebugMode: function (value) {
            Template.DEBUG_MODE = value;
        }
    });

})(jQuery);
};
         201807041949379                                             Z      / * *  
 *   j T e m p l a t e s   0 . 8 . 4   ( h t t p : / / j t e m p l a t e s . t p y t h o n . c o m )  
 *   C o p y r i g h t   ( c )   2 0 0 7 - 2 0 1 3   T o m a s z   G l o c   ( h t t p : / / w w w . t p y t h o n . c o m )  
 *    
 *   D u a l   l i c e n s e d   u n d e r   t h e   M I T   ( M I T - L I C E N S E . t x t )  
 *   a n d / o r   G P L   ( G P L - L I C E N S E . t x t )   l i c e n s e s .  
 *  
 *   I d :   $ I d :   j q u e r y - j t e m p l a t e s _ u n c o m p r e s s e d . j s   2 0 3   2 0 1 3 - 0 2 - 0 3   1 3 : 2 8 : 3 4 Z   t o m   $  
 * /  
  
 / * *  
 *   @ f i l e O v e r v i e w   T e m p l a t e   e n g i n e   i n   J a v a S c r i p t .  
 *   @ n a m e   j T e m p l a t e s  
 *   @ a u t h o r   T o m a s z   G l o c  
 *   @ d a t e   $ D a t e :   2 0 1 3 - 0 2 - 0 3   1 4 : 2 8 : 3 4   + 0 1 0 0   ( N ,   0 3   l u t   2 0 1 3 )   $  
 * /  
  
 i f   ( w i n d o w . j Q u e r y   & &   ! w i n d o w . j Q u e r y . c r e a t e T e m p l a t e )   {  
         ( f u n c t i o n   ( j Q u e r y )   {  
  
                 / * *  
                 *   [ a b s t r a c t ]  
                 *   @ n a m e   B a s e N o d e  
                 *   @ c l a s s   A b s t r a c t   n o d e .   [ a b s t r a c t ]  
                 * /  
  
                 / * *  
                 *   P r o c e s s   n o d e   a n d   g e t   t h e   h t m l   s t r i n g .   [ a b s t r a c t ]  
                 *   @ n a m e   g e t  
                 *   @ f u n c t i o n  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 *   @ m e m b e r O f   B a s e N o d e  
                 * /  
  
                 / * *  
                 *   [ a b s t r a c t ]  
                 *   @ n a m e   B a s e A r r a y  
                 *   @ a u g m e n t s   B a s e N o d e  
                 *   @ c l a s s   A b s t r a c t   a r r a y / c o l l e c t i o n .   [ a b s t r a c t ]  
                 * /  
  
                 / * *  
                 *   A d d   n o d e   ' e '   t o   a r r a y .  
                 *   @ n a m e   p u s h  
                 *   @ f u n c t i o n  
                 *   @ p a r a m   { B a s e N o d e }   e   a   n o d e  
                 *   @ m e m b e r O f   B a s e A r r a y  
                 * /  
  
                 / * *  
                 *   S e e   ( h t t p : / / j q u e r y . c o m / ) .  
                 *   @ n a m e   j Q u e r y  
                 *   @ c l a s s   j Q u e r y   L i b r a r y   ( h t t p : / / j q u e r y . c o m / )  
                 * /  
  
                 / * *  
                 *   S e e   ( h t t p : / / j q u e r y . c o m / )  
                 *   @ n a m e   f n  
                 *   @ c l a s s   j Q u e r y   L i b r a r y   ( h t t p : / / j q u e r y . c o m / )  
                 *   @ m e m b e r O f   j Q u e r y  
                 * /  
  
                 / * *  
                 *   C r e a t e   n e w   t e m p l a t e   f r o m   s t r i n g   s .  
                 *   @ n a m e   T e m p l a t e  
                 *   @ c l a s s   A   t e m p l a t e   o r   m u l t i t e m p l a t e .  
                 *   @ p a r a m   { s t r i n g }   s   A   t e m p l a t e   s t r i n g   ( l i k e :   " T e x t :   { $ T . t x t } . " ) .  
                 *   @ p a r a m   { a r r a y }   [ i n c l u d e s ]   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   [ s e t t i n g s ]   S e t t i n g s .  
                 *   @ c o n f i g   { b o o l e a n }   [ d i s a l l o w _ f u n c t i o n s ]   D o   n o t   a l l o w   u s e   f u n c t i o n   i n   d a t a   ( d e f a u l t :   t r u e ) .  
                 *   @ c o n f i g   { b o o l e a n }   [ f i l t e r _ d a t a ]   E n a b l e   f i l t e r   d a t a   u s i n g   e s c a p e H T M L   ( d e f a u l t :   t r u e ) .  
                 *   @ c o n f i g   { b o o l e a n }   [ f i l t e r _ p a r a m s ]   E n a b l e   f i l t e r   p a r a m e t e r s   u s i n g   e s c a p e H T M L   ( d e f a u l t :   f a l s e ) .  
                 *   @ c o n f i g   { b o o l e a n }   [ r u n n a b l e _ f u n c t i o n s ]   A u t o m a t i c a l l y   r u n   f u n c t i o n   ( f r o m   d a t a )   i n s i d e   { }   [ d e f a u l t :   f a l s e ] .  
                 *   @ c o n f i g   { b o o l e a n }   [ c l o n e _ d a t a ]   C l o n e   i n p u t   d a t a   [ d e f a u l t :   t r u e ]  
                 *   @ c o n f i g   { b o o l e a n }   [ c l o n e _ p a r a m s ]   C l o n e   i n p u t   p a r a m e t e r s   [ d e f a u l t :   t r u e ]  
                 *   @ c o n f i g   { F u n c t i o n }   [ f _ c l o n e D a t a ]   F u n c t i o n   u s e d   t o   d a t a   c l o n i n g  
                 *   @ c o n f i g   { F u n c t i o n }   [ f _ e s c a p e S t r i n g ]   F u n c t i o n   u s e d   t o   e s c a p e   s t r i n g s  
                 *   @ c o n f i g   { F u n c t i o n }   [ f _ p a r s e J S O N ]   F u n c t i o n   u s e d   t o   p a r s e   J S O N  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   T e m p l a t e   =   f u n c t i o n   ( s ,   i n c l u d e s ,   s e t t i n g s )   {  
                         t h i s . _ t r e e   =   [ ] ;  
                         t h i s . _ p a r a m   =   { } ;  
                         t h i s . _ i n c l u d e s   =   n u l l ;  
                         t h i s . _ t e m p l a t e s   =   { } ;  
                         t h i s . _ t e m p l a t e s _ c o d e   =   { } ;  
  
                         / / d e f a u l t   p a r a m e t e r s  
                         t h i s . s e t t i n g s   =   j Q u e r y . e x t e n d ( {  
                                 d i s a l l o w _ f u n c t i o n s :   f a l s e ,  
                                 f i l t e r _ d a t a :   t r u e ,  
                                 f i l t e r _ p a r a m s :   f a l s e ,  
                                 r u n n a b l e _ f u n c t i o n s :   f a l s e ,  
                                 c l o n e _ d a t a :   t r u e ,  
                                 c l o n e _ p a r a m s :   t r u e  
                         } ,   s e t t i n g s ) ;  
  
                         / / s e t   h a n d l e r s  
                         t h i s . f _ c l o n e D a t a   =   ( t h i s . s e t t i n g s . f _ c l o n e D a t a   ! = =   u n d e f i n e d )   ?   ( t h i s . s e t t i n g s . f _ c l o n e D a t a )   :   ( T e m p l a t e U t i l s . c l o n e D a t a ) ;  
                         t h i s . f _ e s c a p e S t r i n g   =   ( t h i s . s e t t i n g s . f _ e s c a p e S t r i n g   ! = =   u n d e f i n e d )   ?   ( t h i s . s e t t i n g s . f _ e s c a p e S t r i n g )   :   ( T e m p l a t e U t i l s . e s c a p e H T M L ) ;  
                         t h i s . f _ p a r s e J S O N   =   ( t h i s . s e t t i n g s . f _ p a r s e J S O N   ! = =   u n d e f i n e d )   ?   ( t h i s . s e t t i n g s . f _ p a r s e J S O N )   :   ( ( t h i s . s e t t i n g s . d i s a l l o w _ f u n c t i o n s )   ?   ( j Q u e r y . p a r s e J S O N )   :   ( T e m p l a t e U t i l s . p a r s e J S O N ) ) ;  
  
                         i f   ( s   = =   n u l l )   {  
                                 r e t u r n ;  
                         }  
  
                         / / s p l i t   m u l t i t e p l a t e  
                         t h i s . s p l i t T e m p l a t e s ( s ,   i n c l u d e s ) ;  
  
                         i f   ( s )   {  
                                 / / s e t   m a i n   t e m p l a t e  
                                 t h i s . s e t T e m p l a t e ( t h i s . _ t e m p l a t e s _ c o d e [ ' M A I N ' ] ,   i n c l u d e s ,   t h i s . s e t t i n g s ) ;  
                         }  
  
                         t h i s . _ t e m p l a t e s _ c o d e   =   n u l l ;  
                 } ;  
  
                 / * *  
                 *   j T e m p l a t e s   v e r s i o n  
                 *   @ t y p e   s t r i n g  
                 * /  
                 T e m p l a t e . v e r s i o n   =   ' 0 . 8 . 4 ' ;  
  
                 / * *  
                 *   D e b u g   m o d e   ( a l l   e r r o r s   a r e   o n ) ,   d e f a u l t :   o f f  
                 *   @ t y p e   B o o l e a n  
                 * /  
                 T e m p l a t e . D E B U G _ M O D E   =   f a l s e ;  
  
                 / * *  
                 *   F o r e a c h   l o o p   l i m i t   ( e n a b l e   o n l y   w h e n   D E B U G _ M O D E   =   t r u e )  
                 *   @ t y p e   i n t e g e r  
                 * /  
                 T e m p l a t e . F O R E A C H _ L O O P _ L I M I T   =   1 0 0 0 0 ;  
  
                 / * *  
                 *   G l o b a l   g u i d  
                 *   @ t y p e   i n t e g e r  
                 * /  
                 T e m p l a t e . g u i d   =   0 ;  
  
                 / * *  
                 *   S p l i t   m u l t i t e m p l a t e   i n t o   m u l t i p l e   t e m p l a t e s .  
                 *   @ p a r a m   { s t r i n g }   s   A   t e m p l a t e   s t r i n g   ( l i k e :   " T e x t :   { $ T . t x t } . " ) .  
                 *   @ p a r a m   { a r r a y }   i n c l u d e s   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 * /  
                 T e m p l a t e . p r o t o t y p e . s p l i t T e m p l a t e s   =   f u n c t i o n   ( s ,   i n c l u d e s )   {  
                         v a r   r e g   =   / \ { # t e m p l a t e   * ( \ w + )   * ( . * ? )   * \ } / g ,   / / s p l i t   m u l t i t e m p l a t e   i n t o   s u b t e m p l a t e s  
 	 	 	 i t e r ,   t n a m e ,   s e ,   l a s t I n d e x   =   n u l l ,   _ t e m p l a t e _ s e t t i n g s   =   [ ] ,   i ;  
  
                         / / w h i l e   f i n d   n e w   s u b t e m p l a t e  
                         w h i l e   ( ( i t e r   =   r e g . e x e c ( s ) )   ! = =   n u l l )   {  
                                 l a s t I n d e x   =   r e g . l a s t I n d e x ;  
                                 t n a m e   =   i t e r [ 1 ] ;  
                                 s e   =   s . i n d e x O f ( ' { # / t e m p l a t e   '   +   t n a m e   +   ' } ' ,   l a s t I n d e x ) ;  
                                 i f   ( s e   = = =   - 1 )   {  
                                         t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   T e m p l a t e   " '   +   t n a m e   +   ' "   i s   n o t   c l o s e d . ' ) ;  
                                 }  
                                 / / s a v e   a   s u b t e m p l a t e   a n d   p a r s e   o p t i o n s  
                                 t h i s . _ t e m p l a t e s _ c o d e [ t n a m e ]   =   s . s u b s t r i n g ( l a s t I n d e x ,   s e ) ;  
                                 _ t e m p l a t e _ s e t t i n g s [ t n a m e ]   =   T e m p l a t e U t i l s . o p t i o n T o O b j e c t ( i t e r [ 2 ] ) ;  
                         }  
                         / / w h e n   n o   s u b t e m p l a t e s ,   u s e   a l l   a s   m a i n   t e m p l a t e  
                         i f   ( l a s t I n d e x   = = =   n u l l )   {  
                                 t h i s . _ t e m p l a t e s _ c o d e [ ' M A I N ' ]   =   s ;  
                                 r e t u r n ;  
                         }  
  
                         / / c r e a t e   a   n e w   o b j e c t   f o r   e v e r y   s u b t e m p l a t e s  
                         f o r   ( i   i n   t h i s . _ t e m p l a t e s _ c o d e )   {  
                                 i f   ( i   ! = =   ' M A I N ' )   {  
                                         t h i s . _ t e m p l a t e s [ i ]   =   n e w   T e m p l a t e ( ) ;  
                                 }  
                         }  
                         f o r   ( i   i n   t h i s . _ t e m p l a t e s _ c o d e )   {  
                                 i f   ( i   ! = =   ' M A I N ' )   {  
                                         t h i s . _ t e m p l a t e s [ i ] . s e t T e m p l a t e ( t h i s . _ t e m p l a t e s _ c o d e [ i ] ,  
 	 	 	 	 	 j Q u e r y . e x t e n d ( { } ,   i n c l u d e s   | |   { } ,   t h i s . _ t e m p l a t e s   | |   { } ) ,  
 	 	 	 	 	 j Q u e r y . e x t e n d ( { } ,   t h i s . s e t t i n g s ,   _ t e m p l a t e _ s e t t i n g s [ i ] ) ) ;  
                                         t h i s . _ t e m p l a t e s _ c o d e [ i ]   =   n u l l ;  
                                 }  
                         }  
                 } ;  
  
                 / * *  
                 *   P a r s e   t e m p l a t e .   ( s h o u l d   b e   t e m p l a t e ,   n o t   m u l t i t e m p l a t e ) .  
                 *   @ p a r a m   { s t r i n g }   s   A   t e m p l a t e   s t r i n g   ( l i k e :   " T e x t :   { $ T . t x t } . " ) .  
                 *   @ p a r a m   { a r r a y }   i n c l u d e s   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   [ s e t t i n g s ]   S e t t i n g s .  
                 * /  
                 T e m p l a t e . p r o t o t y p e . s e t T e m p l a t e   =   f u n c t i o n   ( s ,   i n c l u d e s ,   s e t t i n g s )   {  
                         i f   ( s   = =   u n d e f i n e d )   {  
                                 t h i s . _ t r e e . p u s h ( n e w   T e x t N o d e ( ' ' ,   1 ,   t h i s ) ) ;  
                                 r e t u r n ;  
                         }  
                         s   =   s . r e p l a c e ( / [ \ n \ r ] / g ,   ' ' ) ;   / / r e m o v e   e n d l i n e s  
                         s   =   s . r e p l a c e ( / \ { \ * . * ? \ * \ } / g ,   ' ' ) ;   / / r e m o v e   c o m m e n t s  
                         t h i s . _ i n c l u d e s   =   j Q u e r y . e x t e n d ( { } ,   t h i s . _ t e m p l a t e s   | |   { } ,   i n c l u d e s   | |   { } ) ;  
                         t h i s . s e t t i n g s   =   n e w   O b j e c t ( s e t t i n g s ) ;  
                         v a r   n o d e   =   t h i s . _ t r e e ,  
 	 	 	 o p   =   s . m a t c h ( / \ { # . * ? \ } / g ) ,   / / f i n d   o p e r a t o r s  
 	 	 	 s s   =   0 ,   s e   =   0 ,   e ,   l i t e r a l M o d e   =   0 ,   i ,   l ;  
  
                         / / l o o p   o p e r a t o r s  
                         f o r   ( i   =   0 ,   l   =   ( o p )   ?   ( o p . l e n g t h )   :   ( 0 ) ;   i   <   l ;   + + i )   {  
                                 v a r   t h i s _ o p   =   o p [ i ] ;  
  
                                 / / w h e n   l i t e r a l   m o d e   i s   o n ,   t r e a t   o p e r a t o r   l i k e   a   t e x t  
                                 i f   ( l i t e r a l M o d e )   {  
                                         s e   =   s . i n d e x O f ( ' { # / l i t e r a l } ' ,   s s ) ;   / / f i n d   e n d   o f   b l o c k  
                                         i f   ( s e   = = =   - 1 )   {  
                                                 t h r o w   n e w   E r r o r ( " j T e m p l a t e s :   N o   e n d   o f   l i t e r a l . " ) ;  
                                         }  
                                         i f   ( s e   >   s s )   {  
                                                 n o d e . p u s h ( n e w   T e x t N o d e ( s . s u b s t r i n g ( s s ,   s e ) ,   1 ,   t h i s ) ) ;  
                                         }  
                                         s s   =   s e   +   1 1 ;   / / s t r l e n   ' { # / l i t e r a l } '  
                                         l i t e r a l M o d e   =   0 ;  
                                         w h i l e   ( i   <   l   & &   o p [ i ]   ! = =   ' { # / l i t e r a l } ' )   {   / / s k i p   a l l   o p e r a t o r s   u n t i l   l i t e r a l   e n d  
                                                 i + + ;  
                                         }  
                                         c o n t i n u e ;  
                                 }  
  
                                 s e   =   s . i n d e x O f ( t h i s _ o p ,   s s ) ;  
                                 i f   ( s e   >   s s )   {  
                                         n o d e . p u s h ( n e w   T e x t N o d e ( s . s u b s t r i n g ( s s ,   s e ) ,   l i t e r a l M o d e ,   t h i s ) ) ;  
                                 }  
                                 t h i s _ o p . m a t c h ( / \ { # ( [ \ w \ / ] + ) . * ? \ } / ) ;   / / f i n d   o p e r a t o r   n a m e  
                                 v a r   o p _   =   R e g E x p . $ 1 ;  
                                 s w i t c h   ( o p _ )   {  
                                         c a s e   ' e l s e i f ' :  
                                                 n o d e . a d d C o n d ( t h i s _ o p ) ;  
                                                 b r e a k ;  
                                         c a s e   ' i f ' :  
                                                 e   =   n e w   o p I F ( n o d e ,   t h i s ) ;  
                                                 e . a d d C o n d ( t h i s _ o p ) ;  
                                                 n o d e . p u s h ( e ) ;  
                                                 n o d e   =   e ;  
                                                 b r e a k ;  
                                         c a s e   ' e l s e ' :  
                                                 n o d e . s w i t c h T o E l s e ( ) ;  
                                                 b r e a k ;  
                                         c a s e   ' / i f ' :  
                                         c a s e   ' / f o r ' :  
                                         c a s e   ' / f o r e a c h ' :  
                                                 n o d e   =   n o d e . g e t P a r e n t ( ) ;  
                                                 b r e a k ;  
                                         c a s e   ' f o r e a c h ' :  
                                                 e   =   n e w   o p F O R E A C H ( t h i s _ o p ,   n o d e ,   t h i s ) ;  
                                                 n o d e . p u s h ( e ) ;  
                                                 n o d e   =   e ;  
                                                 b r e a k ;  
                                         c a s e   ' f o r ' :  
                                                 e   =   o p F O R F a c t o r y ( t h i s _ o p ,   n o d e ,   t h i s ) ;  
                                                 n o d e . p u s h ( e ) ;  
                                                 n o d e   =   e ;  
                                                 b r e a k ;  
                                         c a s e   ' c o n t i n u e ' :  
                                         c a s e   ' b r e a k ' :  
                                                 n o d e . p u s h ( n e w   J T E x c e p t i o n ( o p _ ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' i n c l u d e ' :  
                                                 n o d e . p u s h ( n e w   I n c l u d e ( t h i s _ o p ,   t h i s . _ i n c l u d e s ,   t h i s ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' p a r a m ' :  
                                                 n o d e . p u s h ( n e w   U s e r P a r a m ( t h i s _ o p ,   t h i s ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' v a r ' :  
                                                 n o d e . p u s h ( n e w   U s e r V a r i a b l e ( t h i s _ o p ,   t h i s ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' c y c l e ' :  
                                                 n o d e . p u s h ( n e w   C y c l e ( t h i s _ o p ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' l d e l i m ' :  
                                                 n o d e . p u s h ( n e w   T e x t N o d e ( ' { ' ,   1 ,   t h i s ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' r d e l i m ' :  
                                                 n o d e . p u s h ( n e w   T e x t N o d e ( ' } ' ,   1 ,   t h i s ) ) ;  
                                                 b r e a k ;  
                                         c a s e   ' l i t e r a l ' :  
                                                 l i t e r a l M o d e   =   1 ;  
                                                 b r e a k ;  
                                         c a s e   ' / l i t e r a l ' :  
                                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                                         t h r o w   n e w   E r r o r ( " j T e m p l a t e s :   M i s s i n g   b e g i n   o f   l i t e r a l . " ) ;  
                                                 }  
                                                 b r e a k ;  
                                         d e f a u l t :  
                                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                                         t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   u n k n o w n   t a g :   '   +   o p _   +   ' . ' ) ;  
                                                 }  
                                 }  
  
                                 s s   =   s e   +   t h i s _ o p . l e n g t h ;  
                         }  
  
                         i f   ( s . l e n g t h   >   s s )   {  
                                 n o d e . p u s h ( n e w   T e x t N o d e ( s . s u b s t r ( s s ) ,   l i t e r a l M o d e ,   t h i s ) ) ;  
                         }  
                 } ;  
  
                 / * *  
                 *   P r o c e s s   t e m p l a t e   a n d   g e t   t h e   h t m l   s t r i n g .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 T e m p l a t e . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         + + d e e p ;  
  
                         i f   ( d e e p   = =   1   & &   e l e m e n t   ! =   u n d e f i n e d )   {  
                                 j Q u e r y . r e m o v e D a t a ( e l e m e n t ,   " j T e m p l a t e s R e f " ) ;  
                         }  
  
                         v a r   $ T   =   d ,   $ P ,   r e t   =   ' ' ;  
  
                         / / c r e a t e   c l o n e   o f   d a t a  
                         i f   ( t h i s . s e t t i n g s . c l o n e _ d a t a )   {  
                                 $ T   =   t h i s . f _ c l o n e D a t a ( d ,   {   e s c a p e D a t a :   ( t h i s . s e t t i n g s . f i l t e r _ d a t a   & &   d e e p   = =   1 ) ,   n o F u n c :   t h i s . s e t t i n g s . d i s a l l o w _ f u n c t i o n s   } ,   t h i s . f _ e s c a p e S t r i n g ) ;  
                         }  
  
                         / / c r e a t e   c l o n e   o f   p a r a m e t e r s  
                         i f   ( ! t h i s . s e t t i n g s . c l o n e _ p a r a m s )   {  
                                 $ P   =   j Q u e r y . e x t e n d ( { } ,   t h i s . _ p a r a m ,   p a r a m ) ;  
                         }   e l s e   {  
                                 $ P   =   j Q u e r y . e x t e n d ( { } ,  
 	 	 	 	 t h i s . f _ c l o n e D a t a ( t h i s . _ p a r a m ,   {   e s c a p e D a t a :   ( t h i s . s e t t i n g s . f i l t e r _ p a r a m s ) ,   n o F u n c :   f a l s e   } ,   t h i s . f _ e s c a p e S t r i n g ) ,  
 	 	 	 	 t h i s . f _ c l o n e D a t a ( p a r a m ,   {   e s c a p e D a t a :   ( t h i s . s e t t i n g s . f i l t e r _ p a r a m s   & &   d e e p   = =   1 ) ,   n o F u n c :   f a l s e   } ,   t h i s . f _ e s c a p e S t r i n g ) ) ;  
                         }  
  
                         f o r   ( v a r   i   =   0 ,   l   =   t h i s . _ t r e e . l e n g t h ;   i   <   l ;   + + i )   {  
                                 r e t   + =   t h i s . _ t r e e [ i ] . g e t ( $ T ,   $ P ,   e l e m e n t ,   d e e p ) ;  
                         }  
  
                         t h i s . E v a l O b j   =   n u l l ;  
  
                         - - d e e p ;  
                         r e t u r n   r e t ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a n d   r e t u r n   E v a l C l a s s   o b j e c t  
                 *   @ r e t u r n   { E v a l C l a s s }  
                 * /  
                 T e m p l a t e . p r o t o t y p e . g e t B i n   =   f u n c t i o n   ( )   {  
                         i f   ( t h i s . E v a l O b j   = =   n u l l )   {  
                                 t h i s . E v a l O b j   =   n e w   E v a l C l a s s ( t h i s ) ;  
                         }  
                         r e t u r n   t h i s . E v a l O b j ;  
                 } ;  
  
                 / * *  
                 *   S e t   t o   p a r a m e t e r   ' n a m e '   v a l u e   ' v a l u e ' .  
                 *   @ p a r a m   { s t r i n g }   n a m e  
                 *   @ p a r a m   { o b j e c t }   v a l u e  
                 * /  
                 T e m p l a t e . p r o t o t y p e . s e t P a r a m   =   f u n c t i o n   ( n a m e ,   v a l u e )   {  
                         t h i s . _ p a r a m [ n a m e ]   =   v a l u e ;  
                 } ;  
  
  
                 / * *  
                 *   T e m p l a t e   u t i l i t i e s .  
                 *   @ n a m e s p a c e   T e m p l a t e   u t i l i t i e s .  
                 * /  
                 T e m p l a t e U t i l s   =   f u n c t i o n   ( )   {  
                 } ;  
  
                 / * *  
                 *   R e p l a c e   c h a r s   & ,   > ,   < ,   " ,   '   w i t h   h t m l   e n t i t i e s .  
                 *   T o   d i s a b l e   f u n c t i o n   s e t   s e t t i n g s :   f i l t e r _ d a t a = f a l s e ,   f i l t e r _ p a r a m s = f a l s e  
                 *   @ p a r a m   { s t r i n g }   s t r i n g  
                 *   @ r e t u r n   { s t r i n g }  
                 *   @ s t a t i c  
                 *   @ m e m b e r O f   T e m p l a t e U t i l s  
                 * /  
                 T e m p l a t e U t i l s . e s c a p e H T M L   =   f u n c t i o n   ( t x t )   {  
                         r e t u r n   t x t . r e p l a c e ( / & / g ,   ' & a m p ; ' ) . r e p l a c e ( / > / g ,   ' & g t ; ' ) . r e p l a c e ( / < / g ,   ' & l t ; ' ) . r e p l a c e ( / " / g ,   ' & q u o t ; ' ) . r e p l a c e ( / ' / g ,   ' & # 3 9 ; ' ) ;  
                 } ;  
  
                 / * *  
                 *   M a k e   a   c o p y   o d   d a t a   ' d ' .   I t   a l s o   f i l t e r s   d a t a   ( d e p e n d   o n   ' f i l t e r ' ) .  
                 *   @ p a r a m   { o b j e c t }   d   i n p u t   d a t a  
                 *   @ p a r a m   { o b j e c t }   f i l t e r   a   f i l t e r s  
                 *   @ c o n f i g   { b o o l e a n }   [ e s c a p e D a t a ]   U s e   e s c a p e H T M L   o n   e v e r y   s t r i n g .  
                 *   @ c o n f i g   { b o o l e a n }   [ n o F u n c ]   D o   n o t   a l l o w   t o   u s e   f u n c t i o n   ( t h r o w s   e x c e p t i o n ) .  
                 *   @ p a r a m   { F u n c t i o n }   f _ e s c a p e S t r i n g   f u n c t i o n   u s i n g   t o   f i l t e r   s t r i n g   ( u s u a l l y :   T e m p l a t e U t i l s . e s c a p e H T M L )  
                 *   @ r e t u r n   { o b j e c t }   o u t p u t   d a t a   ( f i l t e r e d )  
                 *   @ s t a t i c  
                 *   @ m e m b e r O f   T e m p l a t e U t i l s  
                 * /  
                 T e m p l a t e U t i l s . c l o n e D a t a   =   f u n c t i o n   ( d ,   f i l t e r ,   f _ e s c a p e S t r i n g )   {  
                         i f   ( d   = =   n u l l )   {  
                                 r e t u r n   d ;  
                         }  
                         s w i t c h   ( d . c o n s t r u c t o r )   {  
                                 c a s e   O b j e c t :  
                                         v a r   o   =   { } ;  
                                         f o r   ( v a r   i   i n   d )   {  
                                                 o [ i ]   =   T e m p l a t e U t i l s . c l o n e D a t a ( d [ i ] ,   f i l t e r ,   f _ e s c a p e S t r i n g ) ;  
                                         }  
                                         i f   ( ! f i l t e r . n o F u n c )   {  
                                                 i f   ( d . h a s O w n P r o p e r t y ( " t o S t r i n g " ) )   {  
                                                         o . t o S t r i n g   =   d . t o S t r i n g ;  
                                                 }  
                                         }  
                                         r e t u r n   o ;  
                                 c a s e   A r r a y :  
                                         v a r   a   =   [ ] ;  
                                         f o r   ( v a r   i   =   0 ,   l   =   d . l e n g t h ;   i   <   l ;   + + i )   {  
                                                 a [ i ]   =   T e m p l a t e U t i l s . c l o n e D a t a ( d [ i ] ,   f i l t e r ,   f _ e s c a p e S t r i n g ) ;  
                                         }  
                                         r e t u r n   a ;  
                                 c a s e   S t r i n g :  
                                         r e t u r n   ( f i l t e r . e s c a p e D a t a )   ?   ( f _ e s c a p e S t r i n g ( d ) )   :   ( d ) ;  
                                 c a s e   F u n c t i o n :  
                                         i f   ( f i l t e r . n o F u n c )   {  
                                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                                         t h r o w   n e w   E r r o r ( " j T e m p l a t e s :   F u n c t i o n s   a r e   n o t   a l l o w e d . " ) ;  
                                                 }  
                                                 e l s e   {  
                                                         r e t u r n   u n d e f i n e d ;  
                                                 }  
                                         }  
                         }  
                         r e t u r n   d ;  
                 } ;  
  
                 / * *  
                 *   C o n v e r t   t e x t - b a s e d   o p t i o n   s t r i n g   t o   O b j e c t  
                 *   @ p a r a m   { s t r i n g }   o p t i o n T e x t   t e x t - b a s e d   o p t i o n   s t r i n g  
                 *   @ r e t u r n   { O b j e c t }  
                 *   @ s t a t i c  
                 *   @ m e m b e r O f   T e m p l a t e U t i l s  
                 * /  
                 T e m p l a t e U t i l s . o p t i o n T o O b j e c t   =   f u n c t i o n   ( o p t i o n T e x t )   {  
                         i f   ( o p t i o n T e x t   = = =   n u l l   | |   o p t i o n T e x t   = = =   u n d e f i n e d )   {  
                                 r e t u r n   { } ;  
                         }  
  
                         v a r   o   =   o p t i o n T e x t . s p l i t ( / [ =   ] / ) ;  
                         i f   ( o [ 0 ]   = = =   ' ' )   {  
                                 o . s h i f t ( ) ;  
                         }  
  
                         v a r   o b j   =   { } ;  
                         f o r   ( v a r   i   =   0 ,   l   =   o . l e n g t h ;   i   <   l ;   i   + =   2 )   {  
                                 o b j [ o [ i ] ]   =   o [ i   +   1 ] ;  
                         }  
  
                         r e t u r n   o b j ;  
                 } ;  
  
                 / * *  
                 *   P a r s e   J S O N   s t r i n g   i n t o   o b j e c t  
                 *   @ p a r a m   { s t r i n g }   d a t a   T e x t   J S O N  
                 *   @ r e t u r n   { O b j e c t }  
                 *   @ s t a t i c  
                 * /  
                 T e m p l a t e U t i l s . p a r s e J S O N   =   f u n c t i o n   ( d a t a )   {  
                         i f   ( t y p e o f   d a t a   ! = =   " s t r i n g "   | |   ! d a t a )   {  
                                 r e t u r n   n u l l ;  
                         }  
                         t r y   {  
                                 r e t u r n   ( n e w   F u n c t i o n ( " r e t u r n   "   +   j Q u e r y . t r i m ( d a t a ) ) ) ( ) ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                         t h r o w   n e w   E r r o r ( " j T e m p l a t e s :   I n v a l i d   J S O N " ) ;  
                                 }  
                                 r e t u r n   { } ;  
                         }  
                 } ;  
  
                 / * *  
                 *   F i n d   p a r e n t s   n o d e s   f o r   a   r e f e r e n c e   v a l u e   a n d   r e t u r n   i t  
                 *   @ p a r a m   { E l e m e n t }   e l   h t m l   e l e m e n t  
                 *   @ p a r a m   { i n t }   g u i d   t e m p l a t e   p r o c e s s   u n i q u e   i d e n t i f i c a t o r  
                 *   @ p a r a m   { i n t }   i d   i n d e x  
                 *   @ r e t u r n   { o b j e c t }  
                 *   @ s t a t i c  
                 * /  
                 T e m p l a t e U t i l s . R e t u r n R e f V a l u e   =   f u n c t i o n   ( e l ,   g u i d ,   i d )   {  
                         / / s e a r c h   e l e m e n t   w i t h   s t o r e d   d a t a  
                         w h i l e   ( e l   ! =   n u l l )   {  
                                 v a r   d   =   j Q u e r y . d a t a ( e l ,   ' j T e m p l a t e s R e f ' ) ;  
                                 i f   ( d   ! =   u n d e f i n e d   & &   d . g u i d   = =   g u i d   & &   d . d [ i d ]   ! =   u n d e f i n e d )   {  
                                         r e t u r n   d . d [ i d ] ;  
                                 }  
                                 e l   =   e l . p a r e n t N o d e ;  
                         }  
                         r e t u r n   n u l l ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   n e w   t e x t   n o d e .  
                 *   @ n a m e   T e x t N o d e  
                 *   @ c l a s s   A l l   t e x t   ( b l o c k   { . . } )   b e t w e e n   c o n t r o l ' s   b l o c k   " { # . . } " .  
                 *   @ p a r a m   { s t r i n g }   v a l   t e x t   s t r i n g  
                 *   @ p a r a m   { b o o l e a n }   l i t e r a l M o d e   W h e n   e n a b l e   ( t r u e )   t e m p l a t e   d o e s   n o t   p r o c e s s   b l o c k s   { . . } .  
                 *   @ p a r a m   { T e m p l a t e }   T e m p l a t e   o b j e c t  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   T e x t N o d e   =   f u n c t i o n   ( v a l ,   l i t e r a l M o d e ,   t e m p l a t e )   {  
                         t h i s . _ v a l u e   =   v a l ;  
                         t h i s . _ l i t e r a l M o d e   =   l i t e r a l M o d e ;  
                         t h i s . _ t e m p l a t e   =   t e m p l a t e ;  
                 } ;  
  
                 / * *  
                 *   G e t   t h e   h t m l   s t r i n g   f o r   a   t e x t   n o d e .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 T e x t N o d e . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         i f   ( t h i s . _ l i t e r a l M o d e )   {  
                                 r e t u r n   t h i s . _ v a l u e ;  
                         }  
                         v a r   s   =   t h i s . _ v a l u e ;  
                         v a r   r e s u l t   =   " " ;  
                         v a r   i   =   - 1 ;  
                         v a r   n e s t e d   =   0 ;  
                         v a r   s T e x t   =   - 1 ;  
                         v a r   s E x p r   =   0 ;  
                         w h i l e   ( t r u e )   {  
                                 v a r   l m   =   s . i n d e x O f ( " { " ,   i   +   1 ) ;  
                                 v a r   r m   =   s . i n d e x O f ( " } " ,   i   +   1 ) ;  
                                 i f   ( l m   <   0   & &   r m   <   0 )   {  
                                         b r e a k ;  
                                 }  
                                 i f   ( ( l m   ! =   - 1   & &   l m   <   r m )   | |   ( r m   = =   - 1 ) )   {  
                                         i   =   l m ;  
                                         i f   ( + + n e s t e d   = =   1 )   {  
                                                 s T e x t   =   l m ;  
                                                 r e s u l t   + =   s . s u b s t r i n g ( s E x p r ,   i ) ;  
                                                 s E x p r   =   - 1 ;  
                                         }  
                                 }   e l s e   {  
                                         i   =   r m ;  
                                         i f   ( - - n e s t e d   = = =   0 )   {  
                                                 i f   ( s T e x t   > =   0 )   {  
                                                         r e s u l t   + =   t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e C o n t e n t ( d ,   p a r a m ,   e l e m e n t ,   s . s u b s t r i n g ( s T e x t ,   r m   +   1 ) ) ;  
                                                         s T e x t   =   - 1 ;  
                                                         s E x p r   =   i   +   1 ;  
                                                 }  
                                         }   e l s e   i f   ( n e s t e d   <   0 )   {  
                                                 n e s t e d   =   0 ;  
                                         }  
                                 }  
                         }  
                         i f   ( s E x p r   >   - 1 )   {  
                                 r e s u l t   + =   s . s u b s t r ( s E x p r ) ;  
                         }  
                         r e t u r n   r e s u l t ;  
                 } ;  
  
                 / * *  
                 *   V i r t u a l   c o n t e x t   f o r   e v a l ( )   ( i n t e r n a l   c l a s s )  
                 *   @ n a m e   E v a l C l a s s  
                 *   @ c l a s s   V i r t u a l   b i n   f o r   e v a l ( )   e v a l u a t i o n  
                 *   @ p a r a m   { T e m p l a t e }   t   t e m p l a t e  
                 *   @ p r i v a t e  
                 * /  
                 E v a l C l a s s   =   f u n c t i o n   ( t )   {  
                         t h i s . _ _ t e m p l   =   t ;  
                 } ;  
  
                 / * *  
                 *   E v a l u a t e   e x p r e s s i o n   ( t e m p l a t e   c o n t e n t )  
                 *   @ p a r a m   { o b j e c t }   $ T   d a t a  
                 *   @ p a r a m   { o b j e c t }   $ P   p a r a m e t e r s  
                 *   @ p a r a m   { o b j e c t }   $ Q   e l e m e n t  
                 *   @ p a r a m   { S t r i n g }   _ _ v a l u e   T e m p l a t e   c o n t e n t  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 E v a l C l a s s . p r o t o t y p e . e v a l u a t e C o n t e n t   =   f u n c t i o n   ( $ T ,   $ P ,   $ Q ,   _ _ v a l u e )   {  
                         t r y   {  
                                 v a r   r e s u l t   =   e v a l ( _ _ v a l u e ) ;  
  
                                 i f   ( j Q u e r y . i s F u n c t i o n ( r e s u l t ) )   {  
                                         i f   ( t h i s . _ _ t e m p l . s e t t i n g s . d i s a l l o w _ f u n c t i o n s   | |   ! t h i s . _ _ t e m p l . s e t t i n g s . r u n n a b l e _ f u n c t i o n s )   {  
                                                 r e t u r n   ' ' ;  
                                         }  
                                         r e s u l t   =   r e s u l t ( $ T ,   $ P ,   $ Q ) ;  
                                 }  
                                 r e t u r n   ( r e s u l t   = = =   u n d e f i n e d )   ?   ( " " )   :   ( S t r i n g ( r e s u l t ) ) ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                         i f   ( e   i n s t a n c e o f   J T E x c e p t i o n )   {  
                                                 e . t y p e   =   " s u b t e m p l a t e " ;  
                                         }  
                                         t h r o w   e ;  
                                 }  
                                 r e t u r n   " " ;  
                         }  
                 } ;  
  
                 / * *  
                 *   E v a l u a t e   e x p r e s s i o n   ( s i m p l e   e v a l )  
                 *   @ p a r a m   { o b j e c t }   $ T   d a t a  
                 *   @ p a r a m   { o b j e c t }   $ P   p a r a m e t e r s  
                 *   @ p a r a m   { o b j e c t }   $ Q   e l e m e n t  
                 *   @ p a r a m   { S t r i n g }   _ _ v a l u e   c o n t e n t   t o   e v a l u a t e  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 E v a l C l a s s . p r o t o t y p e . e v a l u a t e   =   f u n c t i o n   ( $ T ,   $ P ,   $ Q ,   _ _ v a l u e )   {  
                         r e t u r n   e v a l ( _ _ v a l u e ) ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   n e w   c o n d i t i o n a l   n o d e .  
                 *   @ n a m e   o p I F  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # i f } .  
                 *   @ p a r a m   { o b j e c t }   p a r   p a r e n t   n o d e  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l   t e m p l a t e  
                 *   @ a u g m e n t s   B a s e A r r a y  
                 * /  
                 v a r   o p I F   =   f u n c t i o n   ( p a r ,   t e m p l )   {  
                         t h i s . _ p a r e n t   =   p a r ;  
                         t h i s . _ t e m p l   =   t e m p l ;  
                         t h i s . _ c o n d   =   [ ] ;   / / c o n d i t i o n s  
                         t h i s . _ t r e e   =   [ ] ;   / / c o n d i t i o n s   s u b t r e e  
                         t h i s . _ c u r r   =   n u l l ;   / / c u r r e n t   s u b t r e e  
                 } ;  
  
                 / * *  
                 *   A d d   n o d e   ' e '   t o   a r r a y .  
                 *   @ p a r a m   { B a s e N o d e }   e   a   n o d e  
                 * /  
                 o p I F . p r o t o t y p e . p u s h   =   f u n c t i o n   ( e )   {  
                         t h i s . _ c u r r . p u s h ( e ) ;  
                 } ;  
  
                 / * *  
                 *   G e t   a   p a r e n t   n o d e .  
                 *   @ r e t u r n   { B a s e N o d e }  
                 * /  
                 o p I F . p r o t o t y p e . g e t P a r e n t   =   f u n c t i o n   ( )   {  
                         r e t u r n   t h i s . _ p a r e n t ;  
                 } ;  
  
                 / * *  
                 *   A d d   c o n d i t i o n  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 * /  
                 o p I F . p r o t o t y p e . a d d C o n d   =   f u n c t i o n   ( o p e r )   {  
                         o p e r . m a t c h ( / \ { # ( ? : e l s e ) * i f   ( . * ? ) \ } / ) ;  
                         t h i s . _ c o n d . p u s h ( R e g E x p . $ 1 ) ;  
                         t h i s . _ c u r r   =   [ ] ;  
                         t h i s . _ t r e e . p u s h ( t h i s . _ c u r r ) ;  
                 } ;  
  
                 / * *  
                 *   S w i t c h   t o   e l s e  
                 * /  
                 o p I F . p r o t o t y p e . s w i t c h T o E l s e   =   f u n c t i o n   ( )   {  
                         t h i s . _ c o n d . p u s h ( t r u e ) ;   / / e l s e   i s   t h e   l a s t   c o n d i t i o n   a n d   i t s   a l w a y s   t r u e  
                         t h i s . _ c u r r   =   [ ] ;  
                         t h i s . _ t r e e . p u s h ( t h i s . _ c u r r ) ;  
                 } ;  
  
                 / * *  
                 *   P r o c e s s   n o d e   d e p e n d   o n   c o n d i t i o n a l   a n d   g e t   t h e   h t m l   s t r i n g .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 o p I F . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         v a r   r e t   =   ' ' ;   / / r e s u l t  
  
                         t r y   {  
                                 / / f o r e a c h   c o n d i t i o n  
                                 f o r   ( v a r   c i   =   0 ,   c l   =   t h i s . _ c o n d . l e n g t h ;   c i   <   c l ;   + + c i )   {  
                                         / / i f   c o n d i t i o n   i s   t r u e  
                                         i f   ( t h i s . _ t e m p l . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ c o n d [ c i ] ) )   {  
                                                 / / e x e c u t e   a n d   e x i t  
                                                 v a r   t   =   t h i s . _ t r e e [ c i ] ;  
                                                 f o r   ( v a r   i   =   0 ,   l   =   t . l e n g t h ;   i   <   l ;   + + i )   {  
                                                         r e t   + =   t [ i ] . g e t ( d ,   p a r a m ,   e l e m e n t ,   d e e p ) ;  
                                                 }  
                                                 r e t u r n   r e t ;  
                                         }  
                                 }  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E   | |   ( e   i n s t a n c e o f   J T E x c e p t i o n ) )   {  
                                         t h r o w   e ;  
                                 }  
                         }  
                         r e t u r n   r e t ;  
                 } ;  
  
                 / * *  
                 *   H a n d l e r   f o r   a   t a g   ' F O R ' .   C r e a t e   n e w   a n d   r e t u r n   r e l a t i v e   o p F O R E A C H   o b j e c t .  
                 *   @ n a m e   o p F O R F a c t o r y  
                 *   @ c l a s s   H a n d l e r   f o r   a   t a g   ' F O R ' .   C r e a t e   n e w   a n d   r e t u r n   r e l a t i v e   o p F O R E A C H   o b j e c t .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ p a r a m   { o b j e c t }   p a r   p a r e n t   n o d e  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l a t e   a   p o i n t e r   t o   T e m p l a t e   o b j e c t  
                 *   @ r e t u r n   { o p F O R E A C H }  
                 * /  
                 o p F O R F a c t o r y   =   f u n c t i o n   ( o p e r ,   p a r ,   t e m p l a t e )   {  
                         / / c r e a t e   o p e r a t o r   F O R E A C H   w i t h   f u n c t i o n   a s   i t e r a t o r  
                         i f   ( o p e r . m a t c h ( / \ { # f o r   ( \ w + ? )   * =   * ( \ S + ? )   + t o   + ( \ S + ? )   * ( ? : s t e p = ( \ S + ? ) ) * \ } / ) )   {  
                                 v a r   f   =   n e w   o p F O R E A C H ( n u l l ,   p a r ,   t e m p l a t e ) ;  
                                 f . _ n a m e   =   R e g E x p . $ 1 ;  
                                 f . _ o p t i o n   =   {   ' b e g i n ' :   ( R e g E x p . $ 2   | |   0 ) ,   ' e n d ' :   ( R e g E x p . $ 3   | |   - 1 ) ,   ' s t e p ' :   ( R e g E x p . $ 4   | |   1 ) ,   ' e x t D a t a ' :   ' $ T '   } ;  
                                 f . _ r u n F u n c   =   ( f u n c t i o n   ( i )   {   r e t u r n   i ;   } ) ;  
                                 r e t u r n   f ;  
                         }   e l s e   {  
                                 t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   O p e r a t o r   f a i l e d   " f i n d " :   '   +   o p e r ) ;  
                         }  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   n e w   l o o p   n o d e .  
                 *   @ n a m e   o p F O R E A C H  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # f o r e a c h } .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ p a r a m   { o b j e c t }   p a r   p a r e n t   n o d e  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l a t e   a   p o i n t e r   t o   T e m p l a t e   o b j e c t  
                 *   @ a u g m e n t s   B a s e A r r a y  
                 * /  
                 v a r   o p F O R E A C H   =   f u n c t i o n   ( o p e r ,   p a r ,   t e m p l a t e )   {  
                         t h i s . _ p a r e n t   =   p a r ;  
                         t h i s . _ t e m p l a t e   =   t e m p l a t e ;  
                         i f   ( o p e r   ! =   n u l l )   {  
                                 o p e r . m a t c h ( / \ { # f o r e a c h   + ( . + ? )   + a s   + ( \ w + ? ) (   . + ) * \ } / ) ;  
                                 t h i s . _ a r g   =   R e g E x p . $ 1 ;  
                                 t h i s . _ n a m e   =   R e g E x p . $ 2 ;  
                                 t h i s . _ o p t i o n   =   R e g E x p . $ 3   | |   n u l l ;  
                                 t h i s . _ o p t i o n   =   T e m p l a t e U t i l s . o p t i o n T o O b j e c t ( t h i s . _ o p t i o n ) ;  
                         }  
  
                         t h i s . _ o n T r u e   =   [ ] ;  
                         t h i s . _ o n F a l s e   =   [ ] ;  
                         t h i s . _ c u r r e n t S t a t e   =   t h i s . _ o n T r u e ;  
                         / / t h i s . _ r u n F u n c   =   n u l l ;  
                 } ;  
  
                 / * *  
                 *   A d d   n o d e   ' e '   t o   a r r a y .  
                 *   @ p a r a m   { B a s e N o d e }   e  
                 * /  
                 o p F O R E A C H . p r o t o t y p e . p u s h   =   f u n c t i o n   ( e )   {  
                         t h i s . _ c u r r e n t S t a t e . p u s h ( e ) ;  
                 } ;  
  
                 / * *  
                 *   G e t   a   p a r e n t   n o d e .  
                 *   @ r e t u r n   { B a s e N o d e }  
                 * /  
                 o p F O R E A C H . p r o t o t y p e . g e t P a r e n t   =   f u n c t i o n   ( )   {  
                         r e t u r n   t h i s . _ p a r e n t ;  
                 } ;  
  
                 / * *  
                 *   S w i t c h   f r o m   c o l l e c t i o n   o n T r u e   t o   o n F a l s e .  
                 * /  
                 o p F O R E A C H . p r o t o t y p e . s w i t c h T o E l s e   =   f u n c t i o n   ( )   {  
                         t h i s . _ c u r r e n t S t a t e   =   t h i s . _ o n F a l s e ;  
                 } ;  
  
                 / * *  
                 *   P r o c e s s   l o o p   a n d   g e t   t h e   h t m l   s t r i n g .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 o p F O R E A C H . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         t r y   {  
                                 / / a r r a y   o f   e l e m e n t s   i n   f o r e a c h   ( o r   f u n c t i o n )  
                                 v a r   f c o u n t   =   ( t h i s . _ r u n F u n c   = = =   u n d e f i n e d )   ?   ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ a r g ) )   :   ( t h i s . _ r u n F u n c ) ;  
                                 i f   ( f c o u n t   = = =   $ )   {  
                                         t h r o w   n e w   E r r o r ( " j T e m p l a t e :   V a r i a b l e   ' $ '   c a n n o t   b e   u s e d   a s   l o o p - f u n c t i o n " ) ;  
                                 }  
                                 v a r   k e y   =   [ ] ;   / / o n l y   f o r   o b j e c t s  
                                 v a r   m o d e   =   t y p e o f   f c o u n t ;  
                                 i f   ( m o d e   = =   ' o b j e c t ' )   {  
                                         / / t r a n s f o r m   o b j e c t   t o   a r r a y  
                                         v a r   a r r   =   [ ] ;  
                                         j Q u e r y . e a c h ( f c o u n t ,   f u n c t i o n   ( k ,   v )   {  
                                                 k e y . p u s h ( k ) ;  
                                                 a r r . p u s h ( v ) ;  
                                         } ) ;  
                                         f c o u n t   =   a r r ;  
                                 }  
                                 / / s e t u p   p r i m a r y   i t e r a t o r ,   i t e r a t o r   c a n   g e t   d a t a   f r o m   o p t i o n s   ( u s i n g   b y   o p e r a t o r   F O R )   o r   f r o m   d a t a   " $ T "  
                                 v a r   e x t D a t a   =   ( t h i s . _ o p t i o n . e x t D a t a   ! = =   u n d e f i n e d )   ?   ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ o p t i o n . e x t D a t a ) )   :   ( ( d   ! =   n u l l )   ?   ( d )   :   ( { } ) ) ;  
                                 i f   ( e x t D a t a   = =   n u l l )   {  
                                         e x t D a t a   =   { } ;  
                                 }  
                                 / / s t a r t ,   e n d   a n d   s t e p  
                                 v a r   s   =   N u m b e r ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ o p t i o n . b e g i n )   | |   0 ) ,   e ;   / / s t a r t ,   e n d  
                                 v a r   s t e p   =   N u m b e r ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ o p t i o n . s t e p )   | |   1 ) ;  
                                 i f   ( m o d e   ! =   ' f u n c t i o n ' )   {  
                                         e   =   f c o u n t . l e n g t h ;  
                                 }   e l s e   {  
                                         i f   ( t h i s . _ o p t i o n . e n d   = = =   u n d e f i n e d   | |   t h i s . _ o p t i o n . e n d   = = =   n u l l )   {  
                                                 e   =   N u m b e r . M A X _ V A L U E ;  
                                         }   e l s e   {  
                                                 e   =   N u m b e r ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ o p t i o n . e n d ) )   +   ( ( s t e p   >   0 )   ?   ( 1 )   :   ( - 1 ) ) ;  
                                         }  
                                 }  
                                 v a r   r e t   =   ' ' ;   / / r e s u l t   s t r i n g  
                                 v a r   i ,   l ;   / / l o c a l   i t e r a t o r s  
  
                                 i f   ( t h i s . _ o p t i o n . c o u n t )   {  
                                         / / l i m i t   n u m b e r   o f   l o o p s  
                                         v a r   t m p   =   s   +   N u m b e r ( t h i s . _ t e m p l a t e . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ o p t i o n . c o u n t ) ) ;  
                                         e   =   ( t m p   >   e )   ?   ( e )   :   ( t m p ) ;  
                                 }  
  
                                 i f   ( ( e   >   s   & &   s t e p   >   0 )   | |   ( e   <   s   & &   s t e p   <   0 ) )   {  
                                         v a r   i t e r a t i o n   =   0 ;  
                                         v a r   _ t o t a l   =   ( m o d e   ! =   ' f u n c t i o n ' )   ?   ( M a t h . c e i l ( ( e   -   s )   /   s t e p ) )   :   u n d e f i n e d ;  
                                         v a r   c k e y ,   c v a l ;   / / c u r r e n t   k e y ,   c u r r e n t   v a l u e  
                                         v a r   l o o p C o u n t e r   =   0 ;  
                                         f o r   ( ;   ( ( s t e p   >   0 )   ?   ( s   <   e )   :   ( s   >   e ) ) ;   s   + =   s t e p ,   + + i t e r a t i o n ,   + + l o o p C o u n t e r )   {  
                                                 i f   ( T e m p l a t e . D E B U G _ M O D E   & &   l o o p C o u n t e r   >   T e m p l a t e . F O R E A C H _ L O O P _ L I M I T )   {  
                                                         t h r o w   n e w   E r r o r ( " j T e m p l a t e :   F o r e a c h   l o o p   l i m i t   w a s   e x c e e d " ) ;  
                                                 }  
                                                 c k e y   =   k e y [ s ] ;  
                                                 i f   ( m o d e   ! =   ' f u n c t i o n ' )   {  
                                                         c v a l   =   f c o u n t [ s ] ;     / / g e t   v a l u e   f r o m   a r r a y  
                                                 }   e l s e   {  
                                                         c v a l   =   f c o u n t ( s ) ;     / / c a l c   f u n c t i o n  
                                                         / / i f   n o   r e s u l t   f r o m   f u n c t i o n   t h e n   s t o p   f o r e a c h  
                                                         i f   ( c v a l   = = =   u n d e f i n e d   | |   c v a l   = = =   n u l l )   {  
                                                                 b r e a k ;  
                                                         }  
                                                 }  
                                                 i f   ( ( t y p e o f   c v a l   = =   ' f u n c t i o n ' )   & &   ( t h i s . _ t e m p l a t e . s e t t i n g s . d i s a l l o w _ f u n c t i o n s   | |   ! t h i s . _ t e m p l a t e . s e t t i n g s . r u n n a b l e _ f u n c t i o n s ) )   {  
                                                         c o n t i n u e ;  
                                                 }  
                                                 i f   ( ( m o d e   = =   ' o b j e c t ' )   & &   ( c k e y   i n   O b j e c t )   & &   ( c v a l   = = =   O b j e c t [ c k e y ] ) )   {  
                                                         c o n t i n u e ;  
                                                 }  
                                                 / / b a c k u p   o n   v a l u e  
                                                 v a r   p r e v V a l u e   =   e x t D a t a [ t h i s . _ n a m e ] ;  
                                                 / / s e t   i t e r a t o r   p r o p e r t i e s  
                                                 e x t D a t a [ t h i s . _ n a m e ]   =   c v a l ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ i n d e x ' ]   =   s ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ i t e r a t i o n ' ]   =   i t e r a t i o n ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ f i r s t ' ]   =   ( i t e r a t i o n   = = =   0 ) ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ l a s t ' ]   =   ( s   +   s t e p   > =   e ) ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ t o t a l ' ]   =   _ t o t a l ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ k e y ' ]   =   ( c k e y   ! = =   u n d e f i n e d   & &   c k e y . c o n s t r u c t o r   = =   S t r i n g )   ?   ( t h i s . _ t e m p l a t e . f _ e s c a p e S t r i n g ( c k e y ) )   :   ( c k e y ) ;  
                                                 e x t D a t a [ t h i s . _ n a m e   +   ' $ t y p e o f ' ]   =   t y p e o f   c v a l ;  
                                                 f o r   ( i   =   0 ,   l   =   t h i s . _ o n T r u e . l e n g t h ;   i   <   l ;   + + i )   {  
                                                         t r y   {  
                                                                 r e t   + =   t h i s . _ o n T r u e [ i ] . g e t ( e x t D a t a ,   p a r a m ,   e l e m e n t ,   d e e p ) ;  
                                                         }   c a t c h   ( e x )   {  
                                                                 i f   ( e x   i n s t a n c e o f   J T E x c e p t i o n )   {  
                                                                         s w i t c h   ( e x . t y p e )   {  
                                                                                 c a s e   ' c o n t i n u e ' :  
                                                                                         i   =   l ;   / / f o r c e   s k i p   t o   n e x t   n o d e  
                                                                                         b r e a k ;  
                                                                                 c a s e   ' b r e a k ' :  
                                                                                         i   =   l ;     / / f o r c e   s k i p   t o   n e x t   n o d e  
                                                                                         s   =   e ;     / / f o r c e   s k i p   o u t s i t e   f o r e a c h  
                                                                                         b r e a k ;  
                                                                                 d e f a u l t :  
                                                                                         t h r o w   e x ;  
                                                                         }  
                                                                 }   e l s e   {  
                                                                         t h r o w   e x ;  
                                                                 }  
                                                         }  
                                                 }  
                                                 / / r e s t o r e   v a l u e s  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ i n d e x ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ i t e r a t i o n ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ f i r s t ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ l a s t ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ t o t a l ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ k e y ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e   +   ' $ t y p e o f ' ] ;  
                                                 d e l e t e   e x t D a t a [ t h i s . _ n a m e ] ;  
                                                 e x t D a t a [ t h i s . _ n a m e ]   =   p r e v V a l u e ;  
                                         }  
                                 }   e l s e   {  
                                         / / n o   i t e m s   t o   l o o p   ( " f o r e a c h - > e l s e " )  
                                         f o r   ( i   =   0 ,   l   =   t h i s . _ o n F a l s e . l e n g t h ;   i   <   l ;   + + i )   {  
                                                 r e t   + =   t h i s . _ o n F a l s e [ i ] . g e t ( d ,   p a r a m ,   e l e m e n t ,   d e e p ) ;  
                                         }  
                                 }  
                                 r e t u r n   r e t ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E   | |   ( e   i n s t a n c e o f   J T E x c e p t i o n ) )   {  
                                         t h r o w   e ;  
                                 }  
                                 r e t u r n   " " ;  
                         }  
                 } ;  
  
                 / * *  
                 *   T e m p l a t e - c o n t r o l   e x c e p t i o n s  
                 *   @ n a m e   J T E x c e p t i o n  
                 *   @ c l a s s   A   c l a s s   u s e d   i n t e r n a l s   f o r   a   t e m p l a t e - c o n t r o l   e x c e p t i o n s  
                 *   @ p a r a m   t y p e   { s t r i n g }   T y p e   o f   e x c e p t i o n  
                 *   @ a u g m e n t s   E r r o r  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   J T E x c e p t i o n   =   f u n c t i o n   ( t y p e )   {  
                         t h i s . t y p e   =   t y p e ;  
                 } ;  
                 J T E x c e p t i o n . p r o t o t y p e   =   E r r o r ;  
  
                 / * *  
                 *   T h r o w   a   t e m p l a t e - c o n t r o l   e x c e p t i o n  
                 *   @ t h r o w s   I t   t h r o w s   i t s e l f  
                 * /  
                 J T E x c e p t i o n . p r o t o t y p e . g e t   =   f u n c t i o n   ( d )   {  
                         t h r o w   t h i s ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   n e w   e n t r y   f o r   i n c l u d e d   t e m p l a t e .  
                 *   @ n a m e   I n c l u d e  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # i n c l u d e } .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ p a r a m   { a r r a y }   i n c l u d e s  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l   t e m p l a t e  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   I n c l u d e   =   f u n c t i o n   ( o p e r ,   i n c l u d e s ,   t e m p l )   {  
                         o p e r . m a t c h ( / \ { # i n c l u d e   ( . * ? ) ( ? :   r o o t = ( . * ? ) ) ? \ } / ) ;  
                         t h i s . _ t e m p l a t e   =   i n c l u d e s [ R e g E x p . $ 1 ] ;  
                         i f   ( t h i s . _ t e m p l a t e   = =   u n d e f i n e d )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                         t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   C a n n o t   f i n d   i n c l u d e :   '   +   R e g E x p . $ 1 ) ;  
                                 }  
                         }  
                         t h i s . _ r o o t   =   R e g E x p . $ 2 ;  
                         t h i s . _ m a i n T e m p l   =   t e m p l ;  
                 } ;  
  
                 / * *  
                 *   R u n   m e t h o d   g e t   o n   i n c l u d e d   t e m p l a t e .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 I n c l u d e . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         t r y   {  
                                 / / r u n   a   s u b t e m p l a t e s   w i t h   a   n e w   r o o t   n o d e  
                                 r e t u r n   t h i s . _ t e m p l a t e . g e t ( t h i s . _ m a i n T e m p l . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ r o o t ) ,   p a r a m ,   e l e m e n t ,   d e e p ) ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E   | |   ( e   i n s t a n c e o f   J T E x c e p t i o n ) )   {  
                                         t h r o w   e ;  
                                 }  
                         }  
                         r e t u r n   ' ' ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   n e w   n o d e   f o r   { # p a r a m } .  
                 *   @ n a m e   U s e r P a r a m  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # p a r a m } .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l   t e m p l a t e  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   U s e r P a r a m   =   f u n c t i o n   ( o p e r ,   t e m p l )   {  
                         o p e r . m a t c h ( / \ { # p a r a m   n a m e = ( \ w * ? )   v a l u e = ( . * ? ) \ } / ) ;  
                         t h i s . _ n a m e   =   R e g E x p . $ 1 ;  
                         t h i s . _ v a l u e   =   R e g E x p . $ 2 ;  
                         t h i s . _ t e m p l   =   t e m p l ;  
                 } ;  
  
                 / * *  
                 *   R e t u r n   v a l u e   o f   s e l e c t e d   p a r a m e t e r .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }   e m p t y   s t r i n g  
                 * /  
                 U s e r P a r a m . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         t r y   {  
                                 p a r a m [ t h i s . _ n a m e ]   =   t h i s . _ t e m p l . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ v a l u e ) ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E   | |   ( e   i n s t a n c e o f   J T E x c e p t i o n ) )   {  
                                         t h r o w   e ;  
                                 }  
                                 p a r a m [ t h i s . _ n a m e ]   =   u n d e f i n e d ;  
                         }  
                         r e t u r n   ' ' ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   n e w   n o d e   f o r   { # v a r } .  
                 *   @ n a m e   U s e r V a r i a b l e  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # v a r } .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l   t e m p l a t e  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   U s e r V a r i a b l e   =   f u n c t i o n   ( o p e r ,   t e m p l )   {  
                         o p e r . m a t c h ( / \ { # v a r   ( . * ? ) \ } / ) ;  
                         t h i s . _ i d   =   R e g E x p . $ 1 ;  
                         t h i s . _ t e m p l   =   t e m p l ;  
                 } ;  
  
                 / * *  
                 *   R e t u r n   v a l u e   o f   s e l e c t e d   v a r i a b l e .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }   c a l l i n g   o f   f u n c t i o n   R e t u r n R e f V a l u e   ( a s   t e x t   s t r i n g )  
                 * /  
                 U s e r V a r i a b l e . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         t r y   {  
                                 i f   ( e l e m e n t   = =   u n d e f i n e d )   {  
                                         r e t u r n   " " ;  
                                 }  
                                 v a r   o b j   =   t h i s . _ t e m p l . g e t B i n ( ) . e v a l u a t e ( d ,   p a r a m ,   e l e m e n t ,   t h i s . _ i d ) ;  
                                 v a r   r e f o b j   =   j Q u e r y . d a t a ( e l e m e n t ,   " j T e m p l a t e s R e f " ) ;  
                                 i f   ( r e f o b j   = =   u n d e f i n e d )   {  
                                         r e f o b j   =   {   g u i d :   ( + + T e m p l a t e . g u i d ) ,   d :   [ ]   } ;  
                                 }  
                                 v a r   i   =   r e f o b j . d . p u s h ( o b j ) ;  
                                 j Q u e r y . d a t a ( e l e m e n t ,   " j T e m p l a t e s R e f " ,   r e f o b j ) ;  
                                 r e t u r n   " ( T e m p l a t e U t i l s . R e t u r n R e f V a l u e ( t h i s , "   +   r e f o b j . g u i d   +   " , "   +   ( i   -   1 )   +   " ) ) " ;  
                         }   c a t c h   ( e )   {  
                                 i f   ( T e m p l a t e . D E B U G _ M O D E   | |   ( e   i n s t a n c e o f   J T E x c e p t i o n ) )   {  
                                         t h r o w   e ;  
                                 }  
                                 r e t u r n   ' ' ;  
                         }  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   n e w   c y c l e   n o d e .  
                 *   @ n a m e   C y c l e  
                 *   @ c l a s s   A   c l a s s   r e p r e s e n t :   { # c y c l e } .  
                 *   @ p a r a m   { s t r i n g }   o p e r   c o n t e n t   o f   o p e r a t o r   { # . . }  
                 *   @ a u g m e n t s   B a s e N o d e  
                 * /  
                 v a r   C y c l e   =   f u n c t i o n   ( o p e r )   {  
                         o p e r . m a t c h ( / \ { # c y c l e   v a l u e s = ( . * ? ) \ } / ) ;  
                         t h i s . _ v a l u e s   =   e v a l ( R e g E x p . $ 1 ) ;  
                         t h i s . _ l e n g t h   =   t h i s . _ v a l u e s . l e n g t h ;  
                         i f   ( t h i s . _ l e n g t h   < =   0 )   {  
                                 t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   n o   e l e m e n t s   f o r   c y c l e ' ) ;  
                         }  
                         t h i s . _ i n d e x   =   0 ;  
                         t h i s . _ l a s t S e s s i o n I D   =   - 1 ;  
                 } ;  
  
                 / * *  
                 *   D o   a   s t e p   o n   c y c l e   a n d   r e t u r n   v a l u e .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ p a r a m   { E l e m e n t }   e l e m e n t   a   H T M L   e l e m e n t  
                 *   @ p a r a m   { N u m b e r }   d e e p  
                 *   @ r e t u r n   { S t r i n g }  
                 * /  
                 C y c l e . p r o t o t y p e . g e t   =   f u n c t i o n   ( d ,   p a r a m ,   e l e m e n t ,   d e e p )   {  
                         v a r   s i d   =   j Q u e r y . d a t a ( e l e m e n t ,   ' j T e m p l a t e S I D ' ) ;  
                         i f   ( s i d   ! =   t h i s . _ l a s t S e s s i o n I D )   {  
                                 t h i s . _ l a s t S e s s i o n I D   =   s i d ;  
                                 t h i s . _ i n d e x   =   0 ;  
                         }  
                         v a r   i   =   t h i s . _ i n d e x + +   %   t h i s . _ l e n g t h ;  
                         r e t u r n   t h i s . _ v a l u e s [ i ] ;  
                 } ;  
  
  
                 / * *  
                 *   A d d   a   T e m p l a t e   t o   H T M L   E l e m e n t s .  
                 *   @ p a r a m   { T e m p l a t e / s t r i n g }   s   a   T e m p l a t e   o r   a   t e m p l a t e   s t r i n g  
                 *   @ p a r a m   { a r r a y }   [ i n c l u d e s ]   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   [ s e t t i n g s ]   S e t t i n g s   ( s e e   T e m p l a t e )  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . s e t T e m p l a t e   =   f u n c t i o n   ( s ,   i n c l u d e s ,   s e t t i n g s )   {  
                         r e t u r n   j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 v a r   t   =   ( s   & &   s . c o n s t r u c t o r   = =   T e m p l a t e )   ?   s   :   n e w   T e m p l a t e ( s ,   i n c l u d e s ,   s e t t i n g s ) ;  
                                 j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e ' ,   t ) ;  
                                 j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e S I D ' ,   0 ) ;  
                         } ) ;  
                 } ;  
  
                 / * *  
                 *   A d d   a   T e m p l a t e   ( f r o m   U R L )   t o   H T M L   E l e m e n t s .  
                 *   @ p a r a m   { s t r i n g }   u r l _   U R L   t o   t e m p l a t e  
                 *   @ p a r a m   { a r r a y }   [ i n c l u d e s ]   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   [ s e t t i n g s ]   S e t t i n g s   ( s e e   T e m p l a t e )  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . s e t T e m p l a t e U R L   =   f u n c t i o n   ( u r l _ ,   i n c l u d e s ,   s e t t i n g s )   {  
                         v a r   s   =   j Q u e r y . a j a x ( {  
                                 u r l :   u r l _ ,  
                                 d a t a T y p e :   ' t e x t ' ,  
                                 a s y n c :   f a l s e ,  
                                 t y p e :   ' G E T '  
                         } ) . r e s p o n s e T e x t ;  
  
                         r e t u r n   j Q u e r y ( t h i s ) . s e t T e m p l a t e ( s ,   i n c l u d e s ,   s e t t i n g s ) ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   a   T e m p l a t e   f r o m   e l e m e n t ' s   c o n t e n t .  
                 *   @ p a r a m   { s t r i n g }   e l e m e n t N a m e   a n   I D   o f   e l e m e n t  
                 *   @ p a r a m   { a r r a y }   [ i n c l u d e s ]   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   [ s e t t i n g s ]   S e t t i n g s   ( s e e   T e m p l a t e )  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . s e t T e m p l a t e E l e m e n t   =   f u n c t i o n   ( e l e m e n t N a m e ,   i n c l u d e s ,   s e t t i n g s )   {  
                         v a r   s   =   j Q u e r y ( ' # '   +   e l e m e n t N a m e ) . v a l ( ) ;  
                         i f   ( s   = =   n u l l )   {  
                                 s   =   j Q u e r y ( ' # '   +   e l e m e n t N a m e ) . h t m l ( ) ;  
                                 s   =   s . r e p l a c e ( / & l t ; / g ,   " < " ) . r e p l a c e ( / & g t ; / g ,   " > " ) ;  
                         }  
  
                         s   =   j Q u e r y . t r i m ( s ) ;  
                         s   =   s . r e p l a c e ( / ^ < \ ! \ [ C D A T A \ [ ( [ \ s \ S ] * ) \ ] \ ] > $ / i m ,   ' $ 1 ' ) ;  
                         s   =   s . r e p l a c e ( / ^ < \ ! - - ( [ \ s \ S ] * ) - - > $ / i m ,   ' $ 1 ' ) ;  
  
                         r e t u r n   j Q u e r y ( t h i s ) . s e t T e m p l a t e ( s ,   i n c l u d e s ,   s e t t i n g s ) ;  
                 } ;  
  
                 / * *  
                 *   C h e c k   i t   H T M L   E l e m e n t s   h a v e   a   t e m p l a t e .   R e t u r n   c o u n t   o f   t e m p l a t e s .  
                 *   @ r e t u r n   { n u m b e r }   N u m b e r   o f   t e m p l a t e s .  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . h a s T e m p l a t e   =   f u n c t i o n   ( )   {  
                         v a r   c o u n t   =   0 ;  
                         j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 i f   ( j Q u e r y . g e t T e m p l a t e ( t h i s ) )   {  
                                         + + c o u n t ;  
                                 }  
                         } ) ;  
                         r e t u r n   c o u n t ;  
                 } ;  
  
                 / * *  
                 *   R e m o t e   T e m p l a t e   f r o m   H T M L   E l e m e n t ( s )  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 * /  
                 j Q u e r y . f n . r e m o v e T e m p l a t e   =   f u n c t i o n   ( )   {  
                         j Q u e r y ( t h i s ) . p r o c e s s T e m p l a t e S t o p ( ) ;  
                         r e t u r n   j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 j Q u e r y . r e m o v e D a t a ( t h i s ,   ' j T e m p l a t e ' ) ;  
                         } ) ;  
                 } ;  
  
                 / * *  
                 *   S e t   t o   p a r a m e t e r   ' n a m e '   v a l u e   ' v a l u e ' .  
                 *   @ p a r a m   { s t r i n g }   n a m e  
                 *   @ p a r a m   { o b j e c t }   v a l u e  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . s e t P a r a m   =   f u n c t i o n   ( n a m e ,   v a l u e )   {  
                         r e t u r n   j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 v a r   t   =   j Q u e r y . g e t T e m p l a t e ( t h i s ) ;  
                                 i f   ( t   ! =   n u l l )   {  
                                         t . s e t P a r a m ( n a m e ,   v a l u e ) ;  
                                 }   e l s e   i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                         t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   T e m p l a t e   i s   n o t   d e f i n e d . ' ) ;  
                                 }  
                         } ) ;  
                 } ;  
  
                 / * *  
                 *   P r o c e s s   t e m p l a t e   u s i n g   d a t a   ' d '   a n d   p a r a m e t e r s   ' p a r a m ' .   U p d a t e   H T M L   c o d e .  
                 *   @ p a r a m   { o b j e c t }   d   d a t a    
                 *   @ p a r a m   { o b j e c t }   [ p a r a m ]   p a r a m e t e r s  
                 *   @ o p t i o n   { o b j e c t }   [ o p t i o n s ]   i n t e r n a l   u s e   o n l y  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . p r o c e s s T e m p l a t e   =   f u n c t i o n   ( d ,   p a r a m ,   o p t i o n s )   {  
                         r e t u r n   j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 v a r   t   =   j Q u e r y . g e t T e m p l a t e ( t h i s ) ;  
                                 i f   ( t   ! =   n u l l )   {  
                                         i f   ( o p t i o n s   ! =   u n d e f i n e d   & &   o p t i o n s . S t r T o J S O N )   {  
                                                 d   =   t . f _ p a r s e J S O N ( d ) ;  
                                         }  
                                         j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e S I D ' ,   j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e S I D ' )   +   1 ) ;  
                                         j Q u e r y ( t h i s ) . h t m l ( t . g e t ( d ,   p a r a m ,   t h i s ,   0 ) ) ;  
                                 }   e l s e   i f   ( T e m p l a t e . D E B U G _ M O D E )   {  
                                         t h r o w   n e w   E r r o r ( ' j T e m p l a t e s :   T e m p l a t e   i s   n o t   d e f i n e d . ' ) ;  
                                 }  
                         } ) ;  
                 } ;  
  
                 / * *  
                 *   P r o c e s s   t e m p l a t e   u s i n g   d a t a   f r o m   U R L   ' u r l _ '   ( o n l y   f o r m a t   J S O N )   a n d   p a r a m e t e r s   ' p a r a m ' .   U p d a t e   H T M L   c o d e .  
                 *   @ p a r a m   { s t r i n g }   u r l _   U R L   t o   d a t a   ( i n   J S O N )  
                 *   @ p a r a m   { o b j e c t }   [ p a r a m ]   p a r a m e t e r s  
                 *   @ p a r a m   { o b j e c t }   o p t i o n s   o p t i o n s   ( o v e r   a j a x S e t t i n g s )   a n d   c a l l b a c k s  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . p r o c e s s T e m p l a t e U R L   =   f u n c t i o n   ( u r l _ ,   p a r a m ,   o p t i o n s )   {  
                         v a r   t h a t   =   t h i s ;  
  
                         v a r   o   =   j Q u e r y . e x t e n d ( {   c a c h e :   f a l s e   } ,   j Q u e r y . a j a x S e t t i n g s ) ;  
                         o   =   j Q u e r y . e x t e n d ( o ,   o p t i o n s ) ;  
  
                         j Q u e r y . a j a x ( {  
                                 u r l :   u r l _ ,  
                                 t y p e :   o . t y p e ,  
                                 d a t a :   o . d a t a ,  
                                 d a t a F i l t e r :   o . d a t a F i l t e r ,  
                                 a s y n c :   o . a s y n c ,  
                                 h e a d e r s :   o . h e a d e r s ,  
                                 c a c h e :   o . c a c h e ,  
                                 t i m e o u t :   o . t i m e o u t ,  
                                 d a t a T y p e :   ' t e x t ' ,  
                                 s u c c e s s :   f u n c t i o n   ( d )   {  
                                         v a r   r   =   j Q u e r y ( t h a t ) . p r o c e s s T e m p l a t e ( d ,   p a r a m ,   {   S t r T o J S O N :   t r u e   } ) ;  
                                         i f   ( o . o n _ s u c c e s s )   {  
                                                 o . o n _ s u c c e s s ( r ) ;  
                                         }  
                                 } ,  
                                 e r r o r :   o . o n _ e r r o r ,  
                                 c o m p l e t e :   o . o n _ c o m p l e t e  
                         } ) ;  
                         r e t u r n   t h i s ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   n e w   U p d a t e r .  
                 *   @ n a m e   U p d a t e r  
                 *   @ c l a s s   T h i s   c l a s s   i s   u s e d   f o r   ' L i v e   R e f r e s h ! ' .  
                 *   @ p a r a m   { s t r i n g }   u r l   A   d e s t i n a t i o n   U R L  
                 *   @ p a r a m   { o b j e c t }   p a r a m   P a r a m e t e r s   ( f o r   t e m p l a t e )  
                 *   @ p a r a m   { n u m b e r }   i n t e r v a l   T i m e   r e f r e s h   i n t e r v a l  
                 *   @ p a r a m   { o b j e c t }   a r g s   A d d i t i o n a l   U R L   p a r a m e t e r s   ( i n   U R L   a l t e r   ? )   a s   a s s o c   a r r a y .  
                 *   @ p a r a m   { a r r a y }   o b j s   A n   a r r a y   o f   H T M L E l e m e n t   w h i c h   w i l l   b e   m o d i f i e d   b y   U p d a t e r .  
                 *   @ p a r a m   { o b j e c t }   o p t i o n s   o p t i o n s   a n d   c a l l b a c k s  
                 * /  
                 v a r   U p d a t e r   =   f u n c t i o n   ( u r l ,   p a r a m ,   i n t e r v a l ,   a r g s ,   o b j s ,   o p t i o n s )   {  
                         t h i s . _ u r l   =   u r l ;  
                         t h i s . _ p a r a m   =   p a r a m ;  
                         t h i s . _ i n t e r v a l   =   i n t e r v a l ;  
                         t h i s . _ a r g s   =   a r g s ;  
                         t h i s . o b j s   =   o b j s ;  
                         t h i s . t i m e r   =   n u l l ;  
                         t h i s . _ o p t i o n s   =   o p t i o n s   | |   { } ;  
  
                         v a r   t h a t   =   t h i s ;  
                         j Q u e r y ( o b j s ) . e a c h ( f u n c t i o n   ( )   {  
                                 j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e U p d a t e r ' ,   t h a t ) ;  
                         } ) ;  
                         t h i s . r u n ( ) ;  
                 } ;  
  
                 / * *  
                 *   C r e a t e   n e w   H T T P   r e q u e s t   t o   s e r v e r ,   g e t   d a t a   ( a s   J S O N )   a n d   s e n d   i t   t o   t e m p l a t e s .   A l s o   c h e c k   d o e s   H T M L E l e m e n t s   s t i l l   e x i s t s   i n   D o c u m e n t .  
                 * /  
                 U p d a t e r . p r o t o t y p e . r u n   =   f u n c t i o n   ( )   {  
                         / / r e m o v e   d e l e t e d   n o d e  
                         t h i s . o b j s   =   j Q u e r y . g r e p ( t h i s . o b j s ,   f u n c t i o n   ( e l e m )   {  
                                 r e t u r n   ( j Q u e r y . c o n t a i n s ( d o c u m e n t . b o d y ,   e l e m . j q u e r y   ?   e l e m [ 0 ]   :   e l e m ) ) ;  
                         } ) ;  
                         / / i f   n o   n o d e   t h e n   d o   n o t h i n g  
                         i f   ( t h i s . o b j s . l e n g t h   = = =   0 )   {  
                                 r e t u r n ;  
                         }  
                         / / a j a x   c a l l  
                         v a r   t h a t   =   t h i s ;  
                         j Q u e r y . a j a x ( {  
                                 u r l :   t h i s . _ u r l ,  
                                 d a t a T y p e :   ' t e x t ' ,  
                                 d a t a :   t h i s . _ a r g s ,  
                                 c a c h e :   f a l s e ,  
                                 h e a d e r s :   t h a t . _ o p t i o n s . h e a d e r s ,  
                                 s u c c e s s :   f u n c t i o n   ( d )   {  
                                         t r y   {  
                                                 v a r   r   =   j Q u e r y ( t h a t . o b j s ) . p r o c e s s T e m p l a t e ( d ,   t h a t . _ p a r a m ,   {   S t r T o J S O N :   t r u e   } ) ;  
                                                 i f   ( t h a t . _ o p t i o n s . o n _ s u c c e s s )   {  
                                                         t h a t . _ o p t i o n s . o n _ s u c c e s s ( r ) ;   / / c a l l b a c k  
                                                 }  
                                         }   c a t c h   ( e x )   {   }  
                                 }  
                         } ) ;  
                         / / s c h e d u l e   n e x t   r u n  
                         t h i s . t i m e r   =   s e t T i m e o u t ( f u n c t i o n   ( )   {   t h a t . r u n ( ) ;   } ,   t h i s . _ i n t e r v a l ) ;  
                 } ;  
  
                 / * *  
                 *   S t a r t   ' L i v e   R e f r e s h ! ' .  
                 *   @ p a r a m   { s t r i n g }   u r l   A   d e s t i n a t i o n   U R L  
                 *   @ p a r a m   { o b j e c t }   p a r a m   P a r a m e t e r s   ( f o r   t e m p l a t e )  
                 *   @ p a r a m   { n u m b e r }   i n t e r v a l   T i m e   r e f r e s h   i n t e r v a l  
                 *   @ p a r a m   { o b j e c t }   a r g s   A d d i t i o n a l   U R L   p a r a m e t e r s   ( i n   U R L   a l t e r   ? )   a s   a s s o c   a r r a y .  
                 *   @ p a r a m   { o b j e c t }   o p t i o n s   o p t i o n s   a n d   c a l l b a c k s  
                 *   @ r e t u r n   { U p d a t e r }   a n   U p d a t e r   o b j e c t  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . p r o c e s s T e m p l a t e S t a r t   =   f u n c t i o n   ( u r l ,   p a r a m ,   i n t e r v a l ,   a r g s ,   o p t i o n s )   {  
                         r e t u r n   n e w   U p d a t e r ( u r l ,   p a r a m ,   i n t e r v a l ,   a r g s ,   t h i s ,   o p t i o n s ) ;  
                 } ;  
  
                 / * *  
                 *   S t o p   ' L i v e   R e f r e s h ! ' .  
                 *   @ r e t u r n   { j Q u e r y }   c h a i n a b l e   j Q u e r y   c l a s s  
                 *   @ m e m b e r O f   j Q u e r y . f n  
                 * /  
                 j Q u e r y . f n . p r o c e s s T e m p l a t e S t o p   =   f u n c t i o n   ( )   {  
                         r e t u r n   j Q u e r y ( t h i s ) . e a c h ( f u n c t i o n   ( )   {  
                                 v a r   u p d a t e r   =   j Q u e r y . d a t a ( t h i s ,   ' j T e m p l a t e U p d a t e r ' ) ;  
                                 i f   ( u p d a t e r   = =   n u l l )   {  
                                         r e t u r n ;  
                                 }  
                                 v a r   t h a t   =   t h i s ;  
                                 u p d a t e r . o b j s   =   j Q u e r y . g r e p ( u p d a t e r . o b j s ,   f u n c t i o n   ( o )   {  
                                         r e t u r n   o   ! =   t h a t ;  
                                 } ) ;  
                                 j Q u e r y . r e m o v e D a t a ( t h i s ,   ' j T e m p l a t e U p d a t e r ' ) ;  
                         } ) ;  
                 } ;  
  
                 j Q u e r y . e x t e n d ( / * *   @ s c o p e   j Q u e r y . p r o t o t y p e   * / {  
                 / * *  
                 *   C r e a t e   n e w   T e m p l a t e .  
                 *   @ p a r a m   { s t r i n g }   s   A   t e m p l a t e   s t r i n g   ( l i k e :   " T e x t :   { $ T . t x t } . " ) .  
                 *   @ p a r a m   { a r r a y }   i n c l u d e s   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   s e t t i n g s   S e t t i n g s .   ( s e e   T e m p l a t e )  
                 *   @ r e t u r n   { T e m p l a t e }  
                 * /  
                 c r e a t e T e m p l a t e :   f u n c t i o n   ( s ,   i n c l u d e s ,   s e t t i n g s )   {  
                         r e t u r n   n e w   T e m p l a t e ( s ,   i n c l u d e s ,   s e t t i n g s ) ;  
                 } ,  
  
                 / * *  
                 *   C r e a t e   n e w   T e m p l a t e   f r o m   U R L .  
                 *   @ p a r a m   { s t r i n g }   u r l _   U R L   t o   t e m p l a t e  
                 *   @ p a r a m   { a r r a y }   i n c l u d e s   A r r a y   o f   i n c l u d e d   t e m p l a t e s .  
                 *   @ p a r a m   { o b j e c t }   s e t t i n g s   S e t t i n g s .   ( s e e   T e m p l a t e )  
                 *   @ r e t u r n   { T e m p l a t e }  
                 * /  
                 c r e a t e T e m p l a t e U R L :   f u n c t i o n   ( u r l _ ,   i n c l u d e s ,   s e t t i n g s )   {  
                         v a r   s   =   j Q u e r y . a j a x ( {  
                                 u r l :   u r l _ ,  
                                 d a t a T y p e :   ' t e x t ' ,  
                                 a s y n c :   f a l s e ,  
                                 t y p e :   ' G E T '  
                         } ) . r e s p o n s e T e x t ;  
  
                         r e t u r n   n e w   T e m p l a t e ( s ,   i n c l u d e s ,   s e t t i n g s ) ;  
                 } ,  
  
                 / * *  
                 *   G e t   a   T e m p l a t e   f o r   H T M L   n o d e  
                 *   @ p a r a m   { E l e m e n t }   H T M L   n o d e  
                 *   @ r e t u r n   { T e m p l a t e }   a   T e m p l a t e   o r   " u n d e f i n e d "  
                 * /  
                 g e t T e m p l a t e :   f u n c t i o n   ( e l e m e n t )   {  
                         r e t u r n   j Q u e r y . d a t a ( e l e m e n t ,   ' j T e m p l a t e ' ) ;  
                 } ,  
  
                 / * *  
                 *   P r o c e s s   t e m p l a t e   a n d   r e t u r n   t e x t   c o n t e n t .  
                 *   @ p a r a m   { T e m p l a t e }   t e m p l a t e   A   T e m p l a t e  
                 *   @ p a r a m   { o b j e c t }   d a t a   d a t a  
                 *   @ p a r a m   { o b j e c t }   p a r a m   p a r a m e t e r s  
                 *   @ r e t u r n   { s t r i n g }   C o n t e n t   o f   t e m p l a t e  
                 * /  
                 p r o c e s s T e m p l a t e T o T e x t :   f u n c t i o n   ( t e m p l a t e ,   d a t a ,   p a r a m e t e r )   {  
                         r e t u r n   t e m p l a t e . g e t ( d a t a ,   p a r a m e t e r ,   u n d e f i n e d ,   0 ) ;  
                 } ,  
  
                 / * *  
                 *   S e t   D e b u g   M o d e  
                 *   @ p a r a m   { B o o l e a n }   v a l u e  
                 * /  
                 j T e m p l a t e s D e b u g M o d e :   f u n c t i o n   ( v a l u e )   {  
                         T e m p l a t e . D E B U G _ M O D E   =   v a l u e ;  
                 }  
         } ) ;  
  
 } ) ( j Q u e r y ) ;  
 } ;  
   C       https://assets.swayam.gov.in/class/plugin.jtemplates.js?v=17122018     Z      Z                        5   E   Q    5   5               Q晠ѐ v w    window   jQuery   createTemplate!!                +H!!        C  ?     *         9                  P         J    J                    	   Q   Q       Q   =   6    Q   B6   Q   X'6   Q   >6   Q   5      6   Q   5      6   Q   5      6   Q   5      6	   Q   5      6
   Q         Q      6   Q      6   Q   	   6   Q   
   6   Q      6   Q      Q   5      6   Q         Q   5      6   Q   5      6   Q      Q   5      6   Q   5      6   Q   5      6   Q   5      6   Q   5      6   Q         Q      Q   5      6   Q   5      6   Q   5      6   Q   5      6   Q      Q      6   Q   5      6   Q      Q   5       6   Q!    	  Q 	  5   "   6   Q#    
  Q 
  5   $   6   Q%      Q   5   &   6   Q   5   '   6   Q   5   (   6   Q   5   )   6   Q   5   *   6   Q   5   +   6   Q   5   ,   6
   Q   5   -   6   Q   5   .   6    Q/      Q   5   0   6!   Q   5   1   6"   Q   5   2   6#   Q   $   
[8   3   ]%   4   ]&   5   ]'   6   ](   7   ])    QǧUˠ~Р  ̠  Π  ̠  ՠ  Ðՠ ;ՠ `ՠ lՠ uР Р Р Р ӐР Р ˠ ՠ =Р Iՠ gՠ sˠ ՠ ՠ ՠ ՠ ՠ ȐР ސˠ ՠ ՠ ՠ ՠ ˘Р ՠ ˠ ՠ Ӑˠ ՠ ˠ ՠ  ˠ 3ՠ Fՠ Vՠ iՠ |ՠ ՠ ՠ ՠ ՠ ˠ ՠ $ՠ -ՠ ;Ѡ Cʠ Nʠ ^ʠ iʠ qʠ ; v    version   0.8.4   DEBUG_MODE%   FOREACH_LOOP_LIMIT	   guid   prototype   splitTemplates   setTemplate   get   getBin   setParam   TemplateUtils   escapeHTML   cloneData   optionToObject   parseJSON   ReturnRefValue   EvalClass   evaluateContent   evaluate	   push   getParent   addCond   switchToElse   opFORFactory   Error   fn   setTemplateURL%   setTemplateElement   hasTemplate   removeTemplate   processTemplate%   processTemplateURL   run)   processTemplateStart'   processTemplateStop   extend   createTemplate#   createTemplateURL   getTemplate+   processTemplateToText'   jTemplatesDebugMode!!      jQuery   Template   TextNode	   opIF   opFOREACH   JTException   Include   UserParam   UserVariable   Cycle   Updater   arguments   .this       +H!!           TemplateB %        U              5 !!       C   Template.prototype.splitTemplatesb   '    '     5   B       5 !!       =   Template.prototype.setTemplateb u  R-  l  R-     2   b       5!!       -   Template.prototype.getb .  @3  .  @3  ;  *   2       5!!       3   Template.prototype.getBinb  3  v4  3  v4  `  -          5 !!       7   Template.prototype.setParamb 65  x5  -5  x5  l  /   
       5!!          TemplateUtilsB  6  6  5  6  u  !          5!!       1   TemplateUtils.escapeHTMLb ^7  7  U7  7    ,          5 !!       /   TemplateUtils.cloneDatab a:  ?  X:  ?    +   P       5 !!       9   TemplateUtils.optionToObjectb @  B  @  B    0           5!!       /   TemplateUtils.parseJSONb XC  D  OC  D    +   0       5 !!       9   TemplateUtils.ReturnRefValueb @F  G  7F  G    0          5 !!          TextNodeB ZI  I  QI  I        
       5 !!       -   TextNode.prototype.getb .K  P  %K  P    *   Z       5 !!          EvalClassB Q  Q  Q  Q  =     
       5!!       G   EvalClass.prototype.evaluateContentb DS  6V  ;S  6V  I  7   C     @5 !!       9   EvalClass.prototype.evaluateb vW  W  mW  W  g  0        @5 !!       	   opIFB X  Y  X  Y  s     
       5 !!       '   opIF.prototype.pushb PZ  Z  GZ  Z    '   
       5!!       1   opIF.prototype.getParentb  [  8[  Z  8[    ,   
       5 !!       -   opIF.prototype.addCondb [  \  [  \    *   
       5 !!       7   opIF.prototype.switchToElseb  \  ]  \  ]    /   
       5!!       %   opIF.prototype.getb ^  Nb  ^  Nb    &   B       5!!          opFORFactoryB "d  f  d  f                  B e  e  e  e    '          5 5!!          opFOREACHB h  Oj  g  Oj    !          5 !!       1   opFOREACH.prototype.pushb j  k  j  k    ,   
       5 !!       ;   opFOREACH.prototype.getParentb  k  k  k  k    1   
       5!!       A   opFOREACH.prototype.switchToElseb  Vl  l  Ml  l    4   
       5 !!       /   opFOREACH.prototype.getb m  ܈  m  ܈    +            key    arr    B qp  p  hp  p    1          5 5!!          JTExceptionB   I    I    #   
       5!!       3   JTException.prototype.getb   7    7    -   
       5!!          IncludeB   P    P              5!!       +   Include.prototype.getb   9  {  9    )   *       5!!          UserParamB o  5  f  5    !   
       5!!       /   UserParam.prototype.getb w    n      +   *       5!!          UserVariableB 9  ×  0  ×    $   
       5 !!       5   UserVariable.prototype.getb .  v  %  v    .   :       5 !!          CycleB s  ٞ  j  ٞ             @5 !!       '   Cycle.prototype.getb   R    R  3  '          5 !!       +   jQuery.fn.setTemplateb ߢ    ֢    F  )   "          s    includes    settings   B  (        G  .   
       5 5!!       1   jQuery.fn.setTemplateURLb   Ŧ    Ŧ  V  ,   
       5 !!       9   jQuery.fn.setTemplateElementb R  G  I  G  i  0          5!!       +   jQuery.fn.hasTemplateb  ,    #    |  )             count   B  u    l    ~  '          55!!       1   jQuery.fn.removeTemplateb    {    {    ,   
          B  $  n    n    .   
       5 5!!       %   jQuery.fn.setParamb     {      &          	   name    value   B  î          .          5 5!!       3   jQuery.fn.processTemplateb u    l      -   "          d    param    options   B            .   "       55!!       9   jQuery.fn.processTemplateURLb   9    9    0   "          param 	   that    o   B ٷ    з      "          55!!          UpdaterB |  \  s  \              	   that    B    6  ܼ  6    '   
       5 5!!       +   Updater.prototype.runb  5    ,      )          	   that   B           8          5    B           "   (       5    B  m    d      -          5 5!!       =   jQuery.fn.processTemplateStartb         $  2   
       5 !!       ;   jQuery.fn.processTemplateStopb          -  1   
         B  
        .  .          	   that    B   Q  	  Q  4  B          5 55!!          createTemplateB (        C  !          5 !!       #   createTemplateURLB         N  $          5!!          getTemplateB         ^            5!!       +   processTemplateToTextB   ~    ~  i  (          5!!       '   jTemplatesDebugModeB   <    <  q  &          5!!       !!   createTemplate!!!!#   createTemplateURL!!!!   getTemplate!!!!+   processTemplateToText!!!!'   jTemplatesDebugMode!!    ;5;?EC      \IK\IK?\R   C    :https://assets.swayam.gov.in/class/plugin.jtemplates.js?v=17122018 necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Content-Type: application/javascript
Last-Modified: Sat, 04 Nov 2017 10:12:35 GMT
Accept-Ranges: bytes
ETag: "6364356f5555d31:0"
Server: Microsoft-IIS/8.5
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
X-Powered-By: ASP.NET, ARR/3.0, ASP.NET
Content-Length: 53085
Cache-Control: max-age=604800
Date: Thu, 24 Jan 2019 05:17:23 GMT
 original-response-headers Content-Type: application/javascript
Last-Modified: Sat, 04 Nov 2017 10:12:35 GMT
Accept-Ranges: bytes
ETag: "6364356f5555d31:0"
Server: Microsoft-IIS/8.5
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
X-Powered-By: ARR/3.0
X-Powered-By: ASP.NET
Content-Length: 53085
Cache-Control: max-age=604800
Date: Thu, 24 Jan 2019 05:17:23 GMT
Connection: keep-alive
 uncompressed-len 0 net-response-time-onstart 518 net-response-time-onstop 825 alt-data 1;53085,javascript/moz-bytecode-20180704194937 alt-data-from-child 1  